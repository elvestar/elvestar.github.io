<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><style>/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2017 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (http://v3.bootcss.com/customize/?id=8390ea044f983f73e1d2f86f37b94f0d)
 * Config saved to config.json and https://gist.github.com/8390ea044f983f73e1d2f86f37b94f0d
 */

/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*,:after,:before{box-sizing:border-box}html{font-size:10px;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857143;color:#333;background-color:#fff}button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#337ab7;text-decoration:none}a:focus,a:hover{color:#23527c;text-decoration:underline}a:focus{outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}figure{margin:0}img{vertical-align:middle}.img-responsive{display:block;max-width:100%;height:auto}.img-rounded{border-radius:6px}.img-thumbnail{padding:4px;line-height:1.42857143;background-color:#fff;border:1px solid #ddd;border-radius:4px;transition:all .2s ease-in-out;display:inline-block;max-width:100%;height:auto}.img-circle{border-radius:50%}hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}[role=button]{cursor:pointer}.container{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}@media (min-width:768px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}.container-fluid{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}.row{margin-left:-15px;margin-right:-15px}.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12,.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12,.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12,.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{position:relative;min-height:1px;padding-left:15px;padding-right:15px}.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{float:left}.col-xs-12{width:100%}.col-xs-11{width:91.66666667%}.col-xs-10{width:83.33333333%}.col-xs-9{width:75%}.col-xs-8{width:66.66666667%}.col-xs-7{width:58.33333333%}.col-xs-6{width:50%}.col-xs-5{width:41.66666667%}.col-xs-4{width:33.33333333%}.col-xs-3{width:25%}.col-xs-2{width:16.66666667%}.col-xs-1{width:8.33333333%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666667%}.col-xs-pull-10{right:83.33333333%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666667%}.col-xs-pull-7{right:58.33333333%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666667%}.col-xs-pull-4{right:33.33333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.66666667%}.col-xs-pull-1{right:8.33333333%}.col-xs-pull-0{right:auto}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666667%}.col-xs-push-10{left:83.33333333%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666667%}.col-xs-push-7{left:58.33333333%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666667%}.col-xs-push-4{left:33.33333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.66666667%}.col-xs-push-1{left:8.33333333%}.col-xs-push-0{left:auto}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666667%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-0{margin-left:0}@media (min-width:768px){.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666667%}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-8{width:66.66666667%}.col-sm-7{width:58.33333333%}.col-sm-6{width:50%}.col-sm-5{width:41.66666667%}.col-sm-4{width:33.33333333%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666667%}.col-sm-pull-10{right:83.33333333%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666667%}.col-sm-pull-7{right:58.33333333%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666667%}.col-sm-pull-4{right:33.33333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.66666667%}.col-sm-pull-1{right:8.33333333%}.col-sm-pull-0{right:auto}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666667%}.col-sm-push-10{left:83.33333333%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666667%}.col-sm-push-7{left:58.33333333%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666667%}.col-sm-push-4{left:33.33333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.66666667%}.col-sm-push-1{left:8.33333333%}.col-sm-push-0{left:auto}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666667%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-0{margin-left:0}}@media (min-width:992px){.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666667%}.col-md-10{width:83.33333333%}.col-md-9{width:75%}.col-md-8{width:66.66666667%}.col-md-7{width:58.33333333%}.col-md-6{width:50%}.col-md-5{width:41.66666667%}.col-md-4{width:33.33333333%}.col-md-3{width:25%}.col-md-2{width:16.66666667%}.col-md-1{width:8.33333333%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666667%}.col-md-pull-10{right:83.33333333%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666667%}.col-md-pull-7{right:58.33333333%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666667%}.col-md-pull-4{right:33.33333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.66666667%}.col-md-pull-1{right:8.33333333%}.col-md-pull-0{right:auto}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666667%}.col-md-push-10{left:83.33333333%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666667%}.col-md-push-7{left:58.33333333%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666667%}.col-md-push-4{left:33.33333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.66666667%}.col-md-push-1{left:8.33333333%}.col-md-push-0{left:auto}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666667%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-0{margin-left:0}}@media (min-width:1200px){.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666667%}.col-lg-10{width:83.33333333%}.col-lg-9{width:75%}.col-lg-8{width:66.66666667%}.col-lg-7{width:58.33333333%}.col-lg-6{width:50%}.col-lg-5{width:41.66666667%}.col-lg-4{width:33.33333333%}.col-lg-3{width:25%}.col-lg-2{width:16.66666667%}.col-lg-1{width:8.33333333%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666667%}.col-lg-pull-10{right:83.33333333%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666667%}.col-lg-pull-7{right:58.33333333%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666667%}.col-lg-pull-4{right:33.33333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.66666667%}.col-lg-pull-1{right:8.33333333%}.col-lg-pull-0{right:auto}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666667%}.col-lg-push-10{left:83.33333333%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666667%}.col-lg-push-7{left:58.33333333%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666667%}.col-lg-push-4{left:33.33333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.66666667%}.col-lg-push-1{left:8.33333333%}.col-lg-push-0{left:auto}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666667%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-0{margin-left:0}}fieldset{margin:0;min-width:0}fieldset,legend{padding:0;border:0}legend{display:block;width:100%;margin-bottom:20px;font-size:21px;line-height:inherit;color:#333;border-bottom:1px solid #e5e5e5}label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700}input[type=search]{box-sizing:border-box}input[type=checkbox],input[type=radio]{margin:4px 0 0;margin-top:1px\9;line-height:normal}input[type=file]{display:block}input[type=range]{display:block;width:100%}select[multiple],select[size]{height:auto}input[type=checkbox]:focus,input[type=file]:focus,input[type=radio]:focus{outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}output{padding-top:7px}.form-control,output{display:block;font-size:14px;line-height:1.42857143;color:#555}.form-control{width:100%;height:34px;padding:6px 12px;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control:focus{border-color:#66afe9;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.form-control::-moz-placeholder{color:#999;opacity:1}.form-control:-ms-input-placeholder{color:#999}.form-control::-webkit-input-placeholder{color:#999}.form-control::-ms-expand{border:0;background-color:transparent}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{background-color:#eee;opacity:1}.form-control[disabled],fieldset[disabled] .form-control{cursor:not-allowed}textarea.form-control{height:auto}input[type=search]{-webkit-appearance:none}@media screen and (-webkit-min-device-pixel-ratio:0){input[type=date].form-control,input[type=datetime-local].form-control,input[type=month].form-control,input[type=time].form-control{line-height:34px}.input-group-sm input[type=date],.input-group-sm input[type=datetime-local],.input-group-sm input[type=month],.input-group-sm input[type=time],input[type=date].input-sm,input[type=datetime-local].input-sm,input[type=month].input-sm,input[type=time].input-sm{line-height:30px}.input-group-lg input[type=date],.input-group-lg input[type=datetime-local],.input-group-lg input[type=month],.input-group-lg input[type=time],input[type=date].input-lg,input[type=datetime-local].input-lg,input[type=month].input-lg,input[type=time].input-lg{line-height:46px}}.form-group{margin-bottom:15px}.checkbox,.radio{position:relative;display:block;margin-top:10px;margin-bottom:10px}.checkbox label,.radio label{min-height:20px;padding-left:20px;margin-bottom:0;font-weight:400;cursor:pointer}.checkbox-inline input[type=checkbox],.checkbox input[type=checkbox],.radio-inline input[type=radio],.radio input[type=radio]{position:absolute;margin-left:-20px;margin-top:4px\9}.checkbox+.checkbox,.radio+.radio{margin-top:-5px}.checkbox-inline,.radio-inline{position:relative;display:inline-block;padding-left:20px;margin-bottom:0;vertical-align:middle;font-weight:400;cursor:pointer}.checkbox-inline+.checkbox-inline,.radio-inline+.radio-inline{margin-top:0;margin-left:10px}.checkbox-inline.disabled,.checkbox.disabled label,.radio-inline.disabled,.radio.disabled label,fieldset[disabled] .checkbox-inline,fieldset[disabled] .checkbox label,fieldset[disabled] .radio-inline,fieldset[disabled] .radio label,fieldset[disabled] input[type=checkbox],fieldset[disabled] input[type=radio],input[type=checkbox].disabled,input[type=checkbox][disabled],input[type=radio].disabled,input[type=radio][disabled]{cursor:not-allowed}.form-control-static{padding-top:7px;padding-bottom:7px;margin-bottom:0;min-height:34px}.form-control-static.input-lg,.form-control-static.input-sm{padding-left:0;padding-right:0}.input-sm{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}select.input-sm{height:30px;line-height:30px}select[multiple].input-sm,textarea.input-sm{height:auto}.form-group-sm .form-control{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.form-group-sm select.form-control{height:30px;line-height:30px}.form-group-sm select[multiple].form-control,.form-group-sm textarea.form-control{height:auto}.form-group-sm .form-control-static{height:30px;min-height:32px;padding:6px 10px;font-size:12px;line-height:1.5}.input-lg{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:6px}select.input-lg{height:46px;line-height:46px}select[multiple].input-lg,textarea.input-lg{height:auto}.form-group-lg .form-control{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:6px}.form-group-lg select.form-control{height:46px;line-height:46px}.form-group-lg select[multiple].form-control,.form-group-lg textarea.form-control{height:auto}.form-group-lg .form-control-static{height:46px;min-height:38px;padding:11px 16px;font-size:18px;line-height:1.3333333}.has-feedback{position:relative}.has-feedback .form-control{padding-right:42.5px}.form-control-feedback{position:absolute;top:0;right:0;z-index:2;display:block;width:34px;height:34px;line-height:34px;text-align:center;pointer-events:none}.form-group-lg .form-control+.form-control-feedback,.input-group-lg+.form-control-feedback,.input-lg+.form-control-feedback{width:46px;height:46px;line-height:46px}.form-group-sm .form-control+.form-control-feedback,.input-group-sm+.form-control-feedback,.input-sm+.form-control-feedback{width:30px;height:30px;line-height:30px}.has-success .checkbox,.has-success .checkbox-inline,.has-success.checkbox-inline label,.has-success.checkbox label,.has-success .control-label,.has-success .help-block,.has-success .radio,.has-success .radio-inline,.has-success.radio-inline label,.has-success.radio label{color:#3c763d}.has-success .form-control{border-color:#3c763d;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-success .form-control:focus{border-color:#2b542c;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #67b168}.has-success .input-group-addon{color:#3c763d;border-color:#3c763d;background-color:#dff0d8}.has-success .form-control-feedback{color:#3c763d}.has-warning .checkbox,.has-warning .checkbox-inline,.has-warning.checkbox-inline label,.has-warning.checkbox label,.has-warning .control-label,.has-warning .help-block,.has-warning .radio,.has-warning .radio-inline,.has-warning.radio-inline label,.has-warning.radio label{color:#8a6d3b}.has-warning .form-control{border-color:#8a6d3b;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-warning .form-control:focus{border-color:#66512c;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #c0a16b}.has-warning .input-group-addon{color:#8a6d3b;border-color:#8a6d3b;background-color:#fcf8e3}.has-warning .form-control-feedback{color:#8a6d3b}.has-error .checkbox,.has-error .checkbox-inline,.has-error.checkbox-inline label,.has-error.checkbox label,.has-error .control-label,.has-error .help-block,.has-error .radio,.has-error .radio-inline,.has-error.radio-inline label,.has-error.radio label{color:#a94442}.has-error .form-control{border-color:#a94442;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-error .form-control:focus{border-color:#843534;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483}.has-error .input-group-addon{color:#a94442;border-color:#a94442;background-color:#f2dede}.has-error .form-control-feedback{color:#a94442}.has-feedback label~.form-control-feedback{top:25px}.has-feedback label.sr-only~.form-control-feedback{top:0}.help-block{display:block;margin-top:5px;margin-bottom:10px;color:#737373}@media (min-width:768px){.form-inline .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}.form-inline .form-control-static{display:inline-block}.form-inline .input-group{display:inline-table;vertical-align:middle}.form-inline .input-group .form-control,.form-inline .input-group .input-group-addon,.form-inline .input-group .input-group-btn{width:auto}.form-inline .input-group>.form-control{width:100%}.form-inline .control-label{margin-bottom:0;vertical-align:middle}.form-inline .checkbox,.form-inline .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.form-inline .checkbox label,.form-inline .radio label{padding-left:0}.form-inline .checkbox input[type=checkbox],.form-inline .radio input[type=radio]{position:relative;margin-left:0}.form-inline .has-feedback .form-control-feedback{top:0}}.form-horizontal .checkbox,.form-horizontal .checkbox-inline,.form-horizontal .radio,.form-horizontal .radio-inline{margin-top:0;margin-bottom:0;padding-top:7px}.form-horizontal .checkbox,.form-horizontal .radio{min-height:27px}.form-horizontal .form-group{margin-left:-15px;margin-right:-15px}@media (min-width:768px){.form-horizontal .control-label{text-align:right;margin-bottom:0;padding-top:7px}}.form-horizontal .has-feedback .form-control-feedback{right:15px}@media (min-width:768px){.form-horizontal .form-group-lg .control-label{padding-top:11px;font-size:18px}}@media (min-width:768px){.form-horizontal .form-group-sm .control-label{padding-top:6px;font-size:12px}}.nav{margin-bottom:0;padding-left:0;list-style:none}.nav>li,.nav>li>a{position:relative;display:block}.nav>li>a{padding:10px 15px}.nav>li>a:focus,.nav>li>a:hover{text-decoration:none;background-color:#eee}.nav>li.disabled>a{color:#777}.nav>li.disabled>a:focus,.nav>li.disabled>a:hover{color:#777;text-decoration:none;background-color:transparent;cursor:not-allowed}.nav .open>a,.nav .open>a:focus,.nav .open>a:hover{background-color:#eee;border-color:#337ab7}.nav .nav-divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.nav>li>a>img{max-width:none}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{float:left;margin-bottom:-1px}.nav-tabs>li>a{margin-right:2px;line-height:1.42857143;border:1px solid transparent;border-radius:4px 4px 0 0}.nav-tabs>li>a:hover{border-color:#eee #eee #ddd}.nav-tabs>li.active>a,.nav-tabs>li.active>a:focus,.nav-tabs>li.active>a:hover{color:#555;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent;cursor:default}.nav-tabs.nav-justified{width:100%;border-bottom:0}.nav-tabs.nav-justified>li{float:none}.nav-tabs.nav-justified>li>a{text-align:center;margin-bottom:5px}.nav-tabs.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}@media (min-width:768px){.nav-tabs.nav-justified>li{display:table-cell;width:1%}.nav-tabs.nav-justified>li>a{margin-bottom:0}}.nav-tabs.nav-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border:1px solid #ddd}@media (min-width:768px){.nav-tabs.nav-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border-bottom-color:#fff}}.nav-pills>li{float:left}.nav-pills>li>a{border-radius:4px}.nav-pills>li+li{margin-left:2px}.nav-pills>li.active>a,.nav-pills>li.active>a:focus,.nav-pills>li.active>a:hover{color:#fff;background-color:#337ab7}.nav-stacked>li{float:none}.nav-stacked>li+li{margin-top:2px;margin-left:0}.nav-justified{width:100%}.nav-justified>li{float:none}.nav-justified>li>a{text-align:center;margin-bottom:5px}.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}@media (min-width:768px){.nav-justified>li{display:table-cell;width:1%}.nav-justified>li>a{margin-bottom:0}}.nav-tabs-justified{border-bottom:0}.nav-tabs-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover{border:1px solid #ddd}@media (min-width:768px){.nav-tabs-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover{border-bottom-color:#fff}}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-right-radius:0;border-top-left-radius:0}.navbar{position:relative;min-height:50px;margin-bottom:20px;border:1px solid transparent}@media (min-width:768px){.navbar{border-radius:4px}}@media (min-width:768px){.navbar-header{float:left}}.navbar-collapse{overflow-x:visible;padding-right:15px;padding-left:15px;border-top:1px solid transparent;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.1);-webkit-overflow-scrolling:touch}.navbar-collapse.in{overflow-y:auto}@media (min-width:768px){.navbar-collapse{width:auto;border-top:0;box-shadow:none}.navbar-collapse.collapse{display:block!important;height:auto!important;padding-bottom:0;overflow:visible!important}.navbar-collapse.in{overflow-y:visible}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse,.navbar-static-top .navbar-collapse{padding-left:0;padding-right:0}}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:340px}@media (max-device-width:480px) and (orientation:landscape){.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:200px}}.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:-15px;margin-left:-15px}@media (min-width:768px){.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:0;margin-left:0}}.navbar-static-top{z-index:1000;border-width:0 0 1px}@media (min-width:768px){.navbar-static-top{border-radius:0}}.navbar-fixed-bottom,.navbar-fixed-top{position:fixed;right:0;left:0;z-index:1030}@media (min-width:768px){.navbar-fixed-bottom,.navbar-fixed-top{border-radius:0}}.navbar-fixed-top{top:0;border-width:0 0 1px}.navbar-fixed-bottom{bottom:0;margin-bottom:0;border-width:1px 0 0}.navbar-brand{float:left;padding:15px;font-size:18px;line-height:20px;height:50px}.navbar-brand:focus,.navbar-brand:hover{text-decoration:none}.navbar-brand>img{display:block}@media (min-width:768px){.navbar>.container-fluid .navbar-brand,.navbar>.container .navbar-brand{margin-left:-15px}}.navbar-toggle{position:relative;float:right;margin-right:15px;padding:9px 10px;margin-top:8px;margin-bottom:8px;background-color:transparent;background-image:none;border:1px solid transparent;border-radius:4px}.navbar-toggle:focus{outline:0}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}@media (min-width:768px){.navbar-toggle{display:none}}.navbar-nav{margin:7.5px -15px}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:20px}@media (max-width:767px){.navbar-nav .open .dropdown-menu{position:static;float:none;width:auto;margin-top:0;background-color:transparent;border:0;box-shadow:none}.navbar-nav .open .dropdown-menu .dropdown-header,.navbar-nav .open .dropdown-menu>li>a{padding:5px 15px 5px 25px}.navbar-nav .open .dropdown-menu>li>a{line-height:20px}.navbar-nav .open .dropdown-menu>li>a:focus,.navbar-nav .open .dropdown-menu>li>a:hover{background-image:none}}@media (min-width:768px){.navbar-nav{float:left;margin:0}.navbar-nav>li{float:left}.navbar-nav>li>a{padding-top:15px;padding-bottom:15px}}.navbar-form{margin:8px -15px;padding:10px 15px;border-top:1px solid transparent;border-bottom:1px solid transparent;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.1),0 1px 0 hsla(0,0%,100%,.1)}@media (min-width:768px){.navbar-form .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.navbar-form .form-control{display:inline-block;width:auto;vertical-align:middle}.navbar-form .form-control-static{display:inline-block}.navbar-form .input-group{display:inline-table;vertical-align:middle}.navbar-form .input-group .form-control,.navbar-form .input-group .input-group-addon,.navbar-form .input-group .input-group-btn{width:auto}.navbar-form .input-group>.form-control{width:100%}.navbar-form .control-label{margin-bottom:0;vertical-align:middle}.navbar-form .checkbox,.navbar-form .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.navbar-form .checkbox label,.navbar-form .radio label{padding-left:0}.navbar-form .checkbox input[type=checkbox],.navbar-form .radio input[type=radio]{position:relative;margin-left:0}.navbar-form .has-feedback .form-control-feedback{top:0}}@media (max-width:767px){.navbar-form .form-group{margin-bottom:5px}.navbar-form .form-group:last-child{margin-bottom:0}}@media (min-width:768px){.navbar-form{width:auto;border:0;margin-left:0;margin-right:0;padding-top:0;padding-bottom:0;box-shadow:none}}.navbar-nav>li>.dropdown-menu{margin-top:0;border-top-right-radius:0;border-top-left-radius:0}.navbar-fixed-bottom .navbar-nav>li>.dropdown-menu{margin-bottom:0;border-top-right-radius:4px;border-top-left-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.navbar-btn{margin-top:8px;margin-bottom:8px}.navbar-btn.btn-sm{margin-top:10px;margin-bottom:10px}.navbar-btn.btn-xs{margin-top:14px;margin-bottom:14px}.navbar-text{margin-top:15px;margin-bottom:15px}@media (min-width:768px){.navbar-text{float:left;margin-left:15px;margin-right:15px}}@media (min-width:768px){.navbar-left{float:left!important}.navbar-right{float:right!important;margin-right:-15px}.navbar-right~.navbar-right{margin-right:0}}.navbar-default{background-color:#f8f8f8;border-color:#e7e7e7}.navbar-default .navbar-brand{color:#777}.navbar-default .navbar-brand:focus,.navbar-default .navbar-brand:hover{color:#5e5e5e;background-color:transparent}.navbar-default .navbar-nav>li>a,.navbar-default .navbar-text{color:#777}.navbar-default .navbar-nav>li>a:focus,.navbar-default .navbar-nav>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav>.active>a,.navbar-default .navbar-nav>.active>a:focus,.navbar-default .navbar-nav>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav>.disabled>a,.navbar-default .navbar-nav>.disabled>a:focus,.navbar-default .navbar-nav>.disabled>a:hover{color:#ccc;background-color:transparent}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#ddd}.navbar-default .navbar-toggle .icon-bar{background-color:#888}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:#e7e7e7}.navbar-default .navbar-nav>.open>a,.navbar-default .navbar-nav>.open>a:focus,.navbar-default .navbar-nav>.open>a:hover{background-color:#e7e7e7;color:#555}@media (max-width:767px){.navbar-default .navbar-nav .open .dropdown-menu>li>a{color:#777}.navbar-default .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav .open .dropdown-menu>.active>a,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#ccc;background-color:transparent}}.navbar-default .navbar-link{color:#777}.navbar-default .navbar-link:hover{color:#333}.navbar-default .btn-link{color:#777}.navbar-default .btn-link:focus,.navbar-default .btn-link:hover{color:#333}.navbar-default .btn-link[disabled]:focus,.navbar-default .btn-link[disabled]:hover,fieldset[disabled] .navbar-default .btn-link:focus,fieldset[disabled] .navbar-default .btn-link:hover{color:#ccc}.navbar-inverse{background-color:#222;border-color:#080808}.navbar-inverse .navbar-brand{color:#9d9d9d}.navbar-inverse .navbar-brand:focus,.navbar-inverse .navbar-brand:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>li>a,.navbar-inverse .navbar-text{color:#9d9d9d}.navbar-inverse .navbar-nav>li>a:focus,.navbar-inverse .navbar-nav>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>.active>a,.navbar-inverse .navbar-nav>.active>a:focus,.navbar-inverse .navbar-nav>.active>a:hover{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav>.disabled>a,.navbar-inverse .navbar-nav>.disabled>a:focus,.navbar-inverse .navbar-nav>.disabled>a:hover{color:#444;background-color:transparent}.navbar-inverse .navbar-toggle{border-color:#333}.navbar-inverse .navbar-toggle:focus,.navbar-inverse .navbar-toggle:hover{background-color:#333}.navbar-inverse .navbar-toggle .icon-bar{background-color:#fff}.navbar-inverse .navbar-collapse,.navbar-inverse .navbar-form{border-color:#101010}.navbar-inverse .navbar-nav>.open>a,.navbar-inverse .navbar-nav>.open>a:focus,.navbar-inverse .navbar-nav>.open>a:hover{background-color:#080808;color:#fff}@media (max-width:767px){.navbar-inverse .navbar-nav .open .dropdown-menu>.dropdown-header{border-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu .divider{background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a{color:#9d9d9d}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:hover{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#444;background-color:transparent}}.navbar-inverse .navbar-link{color:#9d9d9d}.navbar-inverse .navbar-link:hover{color:#fff}.navbar-inverse .btn-link{color:#9d9d9d}.navbar-inverse .btn-link:focus,.navbar-inverse .btn-link:hover{color:#fff}.navbar-inverse .btn-link[disabled]:focus,.navbar-inverse .btn-link[disabled]:hover,fieldset[disabled] .navbar-inverse .btn-link:focus,fieldset[disabled] .navbar-inverse .btn-link:hover{color:#444}.clearfix:after,.clearfix:before,.container-fluid:after,.container-fluid:before,.container:after,.container:before,.form-horizontal .form-group:after,.form-horizontal .form-group:before,.nav:after,.nav:before,.navbar-collapse:after,.navbar-collapse:before,.navbar-header:after,.navbar-header:before,.navbar:after,.navbar:before,.row:after,.row:before{content:" ";display:table}.clearfix:after,.container-fluid:after,.container:after,.form-horizontal .form-group:after,.nav:after,.navbar-collapse:after,.navbar-header:after,.navbar:after,.row:after{clear:both}.center-block{display:block;margin-left:auto;margin-right:auto}.pull-right{float:right!important}.pull-left{float:left!important}.hide{display:none!important}.show{display:block!important}.invisible{visibility:hidden}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.hidden{display:none!important}.affix{position:fixed}@-ms-viewport{width:device-width}.visible-lg,.visible-lg-block,.visible-lg-inline,.visible-lg-inline-block,.visible-md,.visible-md-block,.visible-md-inline,.visible-md-inline-block,.visible-sm,.visible-sm-block,.visible-sm-inline,.visible-sm-inline-block,.visible-xs,.visible-xs-block,.visible-xs-inline,.visible-xs-inline-block{display:none!important}@media (max-width:767px){.visible-xs{display:block!important}table.visible-xs{display:table!important}tr.visible-xs{display:table-row!important}td.visible-xs,th.visible-xs{display:table-cell!important}}@media (max-width:767px){.visible-xs-block{display:block!important}}@media (max-width:767px){.visible-xs-inline{display:inline!important}}@media (max-width:767px){.visible-xs-inline-block{display:inline-block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm{display:block!important}table.visible-sm{display:table!important}tr.visible-sm{display:table-row!important}td.visible-sm,th.visible-sm{display:table-cell!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-block{display:block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-inline{display:inline!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-inline-block{display:inline-block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md{display:block!important}table.visible-md{display:table!important}tr.visible-md{display:table-row!important}td.visible-md,th.visible-md{display:table-cell!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-block{display:block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-inline{display:inline!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-inline-block{display:inline-block!important}}@media (min-width:1200px){.visible-lg{display:block!important}table.visible-lg{display:table!important}tr.visible-lg{display:table-row!important}td.visible-lg,th.visible-lg{display:table-cell!important}}@media (min-width:1200px){.visible-lg-block{display:block!important}}@media (min-width:1200px){.visible-lg-inline{display:inline!important}}@media (min-width:1200px){.visible-lg-inline-block{display:inline-block!important}}@media (max-width:767px){.hidden-xs{display:none!important}}@media (min-width:768px) and (max-width:991px){.hidden-sm{display:none!important}}@media (min-width:992px) and (max-width:1199px){.hidden-md{display:none!important}}@media (min-width:1200px){.hidden-lg{display:none!important}}.visible-print{display:none!important}@media print{.visible-print{display:block!important}table.visible-print{display:table!important}tr.visible-print{display:table-row!important}td.visible-print,th.visible-print{display:table-cell!important}}.visible-print-block{display:none!important}@media print{.visible-print-block{display:block!important}}.visible-print-inline{display:none!important}@media print{.visible-print-inline{display:inline!important}}.visible-print-inline-block{display:none!important}@media print{.visible-print-inline-block{display:inline-block!important}}@media print{.hidden-print{display:none!important}}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;padding-top:0;min-height:100%;font-size:15px;width:100%;max-width:100%;font-weight:300;background:#fff;color:rgba(0,0,0,.8);letter-spacing:.2px}.inner-container{max-width:700px;margin:0 auto}p{word-wrap:break-word;word-break:normal}dt{margin:15px 0;font-weight:500}dt:before{content:"\266F";left:0;position:absolute;top:auto;color:#ccc}pre{border:none;background-color:#f7f7f7;border-radius:3px;white-space:pre-wrap;font-size:13px;padding:3px 10px}code{background:none!important}code.hljs{display:inline!important}h1{margin-top:25px}h1,h2{margin-bottom:20px}h2{font-size:22px;margin-top:30px;color:#444;padding-bottom:9px}h2,h3{font-weight:400}h3{font-size:20px;margin:20px 0}h4,h5,h6{font-size:18px;margin:15px 0}h1,h2,h3,h4,h5,h6{clear:both}p,pre,ul{margin:0 0 15px}li,p,pre,ul{line-height:1.7}blockquote{font-size:15px}.dropdown:hover .dropdown-menu{display:block;margin-top:0}.plyr__play-large svg{color:#333}.plyr--audio .plyr__controls button.tab-focus:focus,.plyr--audio .plyr__controls button:hover,.plyr__play-large{background:#fff}.m-a-0{margin:0!important}.m-t-0{margin-top:0!important}.m-r-0{margin-right:0!important}.m-b-0{margin-bottom:0!important}.m-l-0{margin-left:0!important}.m-a{margin:20px!important}.m-t{margin-top:20px!important}.m-r{margin-right:20px!important}.m-b{margin-bottom:20px!important}.m-l,.m-x{margin-left:20px!important}.m-x{margin-right:20px!important}.m-y{margin-top:20px!important;margin-bottom:20px!important}.m-x-auto{margin-right:auto!important;margin-left:auto!important}.m-a-xs{margin:10px!important}.m-t-xs{margin-top:10px!important}.m-r-xs{margin-right:10px!important}.m-b-xs{margin-bottom:10px!important}.m-l-xs,.m-x-xs{margin-left:10px!important}.m-x-xs{margin-right:10px!important}.m-y-xs{margin-top:10px!important;margin-bottom:10px!important}.m-a-md{margin:30px!important}.m-t-md{margin-top:30px!important}.m-r-md{margin-right:30px!important}.m-b-md{margin-bottom:30px!important}.m-l-md,.m-x-md{margin-left:30px!important}.m-x-md{margin-right:30px!important}.m-y-md{margin-top:30px!important;margin-bottom:30px!important}.m-a-lg{margin:60px!important}.m-t-lg{margin-top:60px!important}.m-r-lg{margin-right:60px!important}.m-b-lg{margin-bottom:60px!important}.m-l-lg,.m-x-lg{margin-left:60px!important}.m-x-lg{margin-right:60px!important}.m-y-lg{margin-top:60px!important;margin-bottom:60px!important}.p-a-0{padding:0!important}.p-t-0{padding-top:0!important}.p-r-0{padding-right:0!important}.p-b-0{padding-bottom:0!important}.p-l-0{padding-left:0!important}.p-a{padding:20px!important}.p-t{padding-top:20px!important}.p-r{padding-right:20px!important}.p-b{padding-bottom:20px!important}.p-l,.p-x{padding-left:20px!important}.p-x{padding-right:20px!important}.p-y{padding-top:20px!important;padding-bottom:20px!important}.p-x-auto{padding-right:auto!important;padding-left:auto!important}.p-a-xs{padding:10px!important}.p-t-xs{padding-top:10px!important}.p-r-xs{padding-right:10px!important}.p-b-xs{padding-bottom:10px!important}.p-l-xs,.p-x-xs{padding-left:10px!important}.p-x-xs{padding-right:10px!important}.p-y-xs{padding-top:10px!important;padding-bottom:10px!important}.p-a-md{padding:30px!important}.p-t-md{padding-top:30px!important}.p-r-md{padding-right:30px!important}.p-b-md{padding-bottom:30px!important}.p-l-md,.p-x-md{padding-left:30px!important}.p-x-md{padding-right:30px!important}.p-y-md{padding-top:30px!important;padding-bottom:30px!important}.p-a-lg{padding:60px!important}.p-t-lg{padding-top:60px!important}.p-r-lg{padding-right:60px!important}.p-b-lg{padding-bottom:60px!important}.p-l-lg,.p-x-lg{padding-left:60px!important}.p-x-lg{padding-right:60px!important}.p-y-lg{padding-top:60px!important;padding-bottom:60px!important}#toc{padding-top:10px;padding-bottom:10px}#toc .nav>li>a{color:#999;border-left:2px solid transparent;padding:4px 4px 4px 20px;font-size:13px;font-weight:400;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#toc .nav .nav>li>a{border-left:1px solid transparent;padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px}#toc .nav>.active>a,#toc .nav>li>a:focus,#toc .nav>li>a:hover{color:#666;text-decoration:none;background-color:transparent;border-left-color:#999}#toc .nav .nav>.active:focus>a,#toc .nav .nav>.active:hover>a,#toc .nav .nav>.active>a,#toc .nav>.active:focus>a,#toc .nav>.active:hover>a,#toc .nav>.active>a{font-weight:700}#toc .nav ul.nav{display:none}#toc .nav>.active>ul.nav{display:block}#toc .affix{top:10px}#toc .affix-bottom{position:absolute}#toc.affix{top:10px!important;margin-top:0!important}#toc.affix-bottom{position:absolute!important}#toc{background:#f8f8f8}@media (max-width:991px){#toc{display:none!important}}@media (min-width:992px){#toc{width:213px}}@media (min-width:1200px){#toc{width:263px}}#toc h2{background:#79aec8;color:#fff;font-size:14px;text-transform:uppercase;letter-spacing:.5px;padding:5px 15px;margin-bottom:12px;border-bottom:none}.navbar{width:100%;background-color:#fff;border-bottom:1px solid #eee;border-radius:0;margin-bottom:0}.navbar .navbar-brand{color:#333;font-weight:500;font-family:Lora,Georgia,SimSun,Microsoft YaHei,serif}.navbar .nav{float:right}.navbar .nav>li>a{color:#333;font-size:14px}.navbar .navbar-brand,.navbar .navbar-item{height:65px;line-height:35px}.footer{padding-top:40px;padding-bottom:40px;margin-top:100px;color:#767676;text-align:center;border-top:1px solid #e5e5e5;font-size:15px}.footer ul{padding-left:0;list-style:none;margin-bottom:0}.footer li{display:inline}.footer .footer-social{margin-bottom:20px}.footer .footer-links{margin-top:20px}table{display:table;width:100%;border-collapse:collapse;border-spacing:0;overflow:auto;font-size:15px}table caption{text-align:center}table td,table th{padding:6px 13px;border:1px solid #ddd}table tr{background-color:#fff;border-top:1px solid #ccc}table th{font-weight:700}table{margin-bottom:15px}img{max-width:100%}.img-default,img{display:block;margin:0 auto}.img-default{width:75%}.img-center{display:block;margin:0 auto}.img-center .img-title,.img-title{text-align:center}.img-title{font-size:13px;color:rgba(0,0,0,.8);margin-top:3px;margin-bottom:3px}#article img,.note img{max-width:100%;max-height:800px}.note{font-size:15px;background:#fff}.note a{color:#3b94d9}.note h1{font-size:32px;padding-bottom:10px}.note h2{font-size:24px;font-weight:400}.note h3{font-weight:400;font-size:20px}.note h4,.note h5,.note h6{font-size:15px;margin:15px 0}.note .note-content-wrap{border-right:1px solid #fefefe}.note .note-aside{font-size:13px}.note .tocInline{display:none}.readingNote .note{padding:5px 330px 5px 0;position:relative}.readingNote .note blockquote{padding:3px 15px;font-size:15px}.readingNote .note .imageWrapper{position:absolute;z-index:100;top:0;right:0;width:300px}.readingNote .note .imageWrapper img{margin:0 auto;max-height:300px;max-width:270px}.readingNote .note .imageWrapper:before{content:"\27B4"}.section-number{display:none}.pageMeta{margin-bottom:20px;font-size:14px;line-height:18px;color:#999}.pageMeta span{margin-left:2px}.pageMeta span,.pageMeta span a,.pageMeta span i{margin-right:5px}#articleBar.affix{top:0!important;margin-top:0!important;box-shadow:0 1px 3px rgba(0,0,0,.05);border-bottom:none}#articleBar.affix-bottom{position:absolute!important}#articleBar-wrapper{height:50px}#articleBar{width:100%;height:50px;background-color:#fff;border-bottom:1px solid #eee}#articleBar ul{list-style:none;text-align:center;width:100%;margin:0;padding:0}#articleBar ul li{display:inline;margin:0 10px}#articleBar ul li a{display:inline-block;height:50px;padding:15px 0;font-size:14px;text-transform:uppercase;font-weight:700;cursor:pointer;text-decoration:none;color:#71767a}#articleBar ul li.active a{color:#0099e5;border-bottom:2px solid #0099e5}.life #checkpointList{overflow:scroll}.archives .archives-item-list li{list-style:circle;margin:3px 0}.archives .archives-date,.archives .archives-divider{color:#666}.archives .archives-divider{margin:0 3px}body.gallery{font:16px/1.5 Open Sans,Helvetica Neue,Helvetica,arial,sans-serif;font-weight:300;letter-spacing:.1px;padding:0;margin:0;background:#090909;color:#444;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}.gallery .Collections,.gallery .Posts{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.gallery .Collection,.gallery .Post-teaser{width:33.33%;height:250px;background-position:50% 50%;background-size:cover;position:relative}.gallery .Collection .contents,.gallery .Post-teaser .contents{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;background:rgba(0,0,0,.8);transition:opacity .25s ease-out;opacity:0;z-index:15;position:absolute;top:0;left:0}.gallery .Collection:hover .contents,.gallery .Post-teaser:hover .contents{opacity:1}.gallery .Collection .contents a,.gallery .Post-teaser .contents a{color:#fff;text-transform:uppercase;text-decoration:none;font-size:.7rem;letter-spacing:1px;border:2px solid hsla(0,0%,100%,.25);padding:10px 25px}.gallery .Collection .contents a:hover,.gallery .Post-teaser .contents a:hover{background:#fff;color:#000;text-decoration:none}.gallery .Exif{position:fixed;top:0;left:0;width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;background:rgba(0,0,0,.75);color:hsla(0,0%,100%,.6);transition:all .4s cubic-bezier(.25,.46,.45,.94);pointer-events:none;padding-top:300px;font-size:.85rem;opacity:0;z-index:200}.gallery .Exif.show{padding-top:0;opacity:1;pointer-events:all}.gallery .Exif td:first-child{text-align:right;font-weight:400;padding-right:10px;color:#fff}.gallery .Exif-close{position:absolute;top:50px;right:50px;border:1px solid hsla(0,0%,100%,.3);width:35px;height:35px;line-height:32px;border-radius:50%;text-align:center;font-size:.75rem;color:hsla(0,0%,100%,.5);transition:all .2s}.gallery .Exif-close:hover{border-color:#fff;color:#fff}.gallery footer{font-family:Roboto;padding:50px 25px;font-size:.75rem;display:-ms-flexbox;display:flex}.gallery footer ul{list-style:none;margin-right:25px;-ms-flex:0 0 auto;flex:0 0 auto}.gallery footer ul li.title{font-weight:400;color:#fff}.gallery footer ul:last-child li{width:50%}.gallery .Images{margin:0 75px;-moz-column-gap:25px;column-gap:25px;-moz-column-rule-width:0;column-rule-width:0}.gallery .Image{display:inline-block;margin-bottom:25px;margin-right:25px;position:relative;cursor:zoom-in}.gallery .Image:hover .Image-overlay{opacity:1}.gallery .Image-overlay{opacity:0;pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.45);display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;transition:opacity .25s ease-out}.gallery .Image-overlay:after{display:block;content:"+";color:hsla(0,0%,100%,.95);text-shadow:0 1px 2px #000}.gallery .Image img{width:360px;height:360px;box-shadow:0 5px 10px rgba(0,0,0,.5);background:#111}.gallery .Image:hover{opacity:1!important}.gallery body.light{background:#fff;color:#515151}.gallery body.light .Logo{color:#121212}.gallery body.light .Logo .img>span{background:#121212}.gallery body.light h1,.gallery body.light h2,.gallery body.light h3,.gallery body.light h4{color:#121212;font-weight:400;font-family:Roboto;margin-bottom:10px}.gallery #disqus_thread:before,.gallery body.light h2:before{display:block;border-top:1px dotted #ddd;width:75%;margin:75px auto;content:" "}.gallery body.light h3{margin-top:50px}.gallery body.light a{color:#111;font-weight:400}.gallery body.light a:hover{text-decoration:underline}.gallery body.light footer a{color:#a0a2a4}.gallery body.light footer a:hover{color:#111;text-decoration:none}.gallery body.light footer ul li.title{color:#1c1d21}.gallery .Lightbox{position:fixed;top:0;left:0;z-index:100;width:100%;height:100%;background:rgba(0,0,0,.95);display:none;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;cursor:zoom-out}.gallery .Lightbox.show{display:-ms-flexbox;display:flex}.gallery .Lightbox img{-ms-flex:0 0 auto;flex:0 0 auto}.gallery .Lightbox img.portrait{height:90%}.gallery .Lightbox img.landscape{width:90%}.gallery body.light .Lightbox{background:hsla(0,0%,100%,.95)}.gallery .Logo{color:#fff;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.gallery .Logo .img{margin:25px auto;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;width:50px;opacity:.75;transform:scale(.5);transition:opacity .25s}.gallery .Logo .img:hover{opacity:1}.gallery .Logo .img>span{width:25px;height:25px;background:#fff}.gallery .Logo .img>span:first-of-type{opacity:.75}.gallery .Logo .img>span:nth-of-type(2){opacity:.5}.gallery .Logo .img>span:nth-of-type(3){opacity:.25}.gallery .Logo .img>span:nth-of-type(4){opacity:.15}.gallery .Logo .name{font-weight:400;font-size:.9rem;letter-spacing:2px}.gallery .Logo .name,.gallery .Logo .text{text-align:center;display:block;text-transform:uppercase}.gallery .Logo .text{font-size:.55rem;letter-spacing:8.6px;opacity:.3}.gallery *{box-sizing:border-box}.gallery img{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.gallery header{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;height:250px}.gallery a{color:inherit;text-decoration:none}.gallery a:hover{color:#fff}.gallery .Post{max-width:860px;margin:0 auto;padding:0 75px;line-height:1.75;margin-bottom:75px}.gallery .Post img{width:100%;cursor:zoom-in}.gallery .Post-teaser{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.gallery .Post-teaser .name{margin:0;width:100%;text-align:center;font-size:.8rem;padding:10px 0;background:hsla(0,0%,100%,.9)}@media screen and (max-width:960px){.gallery .Images{-moz-column-count:1;column-count:1}}@media screen and (min-width:1600px){.gallery .Images{-moz-column-count:4;column-count:4}}@media screen and (min-width:1800px){.gallery .Images{-moz-column-count:5;column-count:5}}body.evernote,html.evernote{height:100%;overflow:hidden;background-color:#fff}.evernote .aside,.evernote .aside-1,.evernote .aside-2,.evernote .container,.evernote .content,.evernote .row-evernote{height:100%}.evernote .aside-1{background-color:#f8f8f8;border-right:1px solid #ececec;padding-left:0;padding-right:0;text-align:center}.evernote .aside-1 a{color:#666;border-radius:0}.evernote .avatar{padding:3px;width:100%;margin-bottom:30px}.evernote .aside-2{border-right:1px solid #ececec;padding-left:10px;padding-right:10px}.evernote .aside-2,.evernote .content{padding-top:20px;overflow-y:auto}.evernote .container{width:100%}.evernote .media{border-bottom:1px solid #ececec;height:72px}.evernote .media .media-heading{font-size:14px}.evernote .media .media-heading a{color:#000}.evernote .media img.media-object{width:40px;max-height:60px}.evernote .last-update{font-size:12px}.evernote .last-update-time a{color:green}.evernote .list-group-item{font-size:14px}.evernote li.active>a,.evernote li.active>a:focus,.evernote li.active>a:hover{color:#666;background-color:#e5e5e5}.timeline-content{border-right:1px solid #ececec}.timeline-content h2{font-size:16px;font-weight:400;height:40px;margin-bottom:5px;line-height:40px}.timeline-content ul{padding:0;margin:0}.timeline-content ul:after{display:block;visibility:hidden;clear:both;height:0;content:".";overflow:hidden}.timeline-content .text{width:125px;height:125px;padding:10px 12px;display:block}.timeline-content .text a{display:block;width:101px;height:105px}.timeline-content li.text{position:relative;float:left;margin:0 6px 6px 0;overflow:hidden;background-color:#ddd;list-style:none}.timeline-content li.text a{line-height:21px;overflow:hidden;padding:0;color:#666;text-decoration:none;outline:none}.timeline-content li.text h3{max-height:42px;line-height:21px;margin:3px 0 13px;overflow:hidden;font-size:16px;font-weight:700}.timeline-content li.text p{word-wrap:break-word;line-height:23px;font-size:12px}.timeline-content li.text .info{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;color:#fff;z-index:100;opacity:0;background:#353535}.timeline-content li.text .info em{display:block;padding-top:40px;font-size:18px;line-height:40px;font-weight:700;font-style:normal}.timeline-content li.text .info small{font-size:14px}.timeline-content li.text a:hover .info{opacity:.9}.timeline .timeline-month-anchor{text-align:right}.tms-calendar .q1{fill:#d6e685}.tms-calendar .q2{fill:#8cc665}.tms-calendar .q3{fill:#44a340}.tms-calendar .q4{fill:#1e6823}.tms-calendar .q5{fill:#fb8072}.dayClockItems{background:#fff;padding:20px;border-radius:3px;margin-bottom:10px;color:#222;font-size:14px}.dayClockItems .itemStats{padding:0}.dayClockItems .itemStats .week{margin-left:3px;font-size:80%}.dayClockItems .itemStats .info{margin-top:3px}.dayClockItems .itemStats .info,.dayClockItems .itemStats .week{color:#888}.dayClockItems .itemList{padding:0}.dayClockItems .itemList ul{margin:0;padding:0}.dayClockItems .itemList li{list-style:none;padding:5px 10px;border-radius:3px}.dayClockItems .itemList li .time{color:#999;margin-right:15px}.dayClockItems .itemList li .cost{color:#888;font-size:80%}.dayClockItems .itemList li .projectInfo{display:none}.dayClockItems .itemList li .projectInfo .project{margin-right:3px}.dayClockItems .itemList li .projectInfo .text-success{color:#60be29}.dayClockItems .itemList li .projectInfo .label-success{background-color:#60be29}.dayClockItems .itemList li .projectInfo .text-primary{color:#00a0e9}.dayClockItems .itemList li .projectInfo .label-primary{background-color:#00a0e9}.dayClockItems .itemList li .projectInfo .text-danger{color:#e01515}.dayClockItems .itemList li .projectInfo .label-danger{background-color:#e01515}.dayClockItems .itemList li .projectInfo .text-default{color:#ccc}.dayClockItems .itemList li .projectInfo .label-default{background-color:#ccc}.dayClockItems .itemList li.timeGapLg .thing,.dayClockItems .itemList li.timeGapLg .time{color:#fff}.dayClockItems .itemList li.timeGapMd,.dayClockItems .itemList li.timeGapSm{background:#ececec}.dayClockItems .itemList li.timeGapLg{background:#70d445}.dayClockItems .itemList li.clockItem:hover{background:#f4f4f4}.dayClockItems .itemList li.clockItem:hover .cost{display:none}.dayClockItems .itemList li.clockItem:hover .projectInfo{display:inline}.zy-event{background-color:#ddd;margin-right:5px;margin-bottom:5px;width:125px;height:125px;overflow:hidden;padding:5px 8px}.zy-event:hover{background-color:#bbb}.zy-event-head>a{font-size:90%;font-weight:700;color:#74797e;word-break:break-all}.zy-event-body{margin-top:5px}.zy-event-body>p{color:#74797e;word-break:break-all;font-size:80%}.zy-event-info{position:absolute;top:1px;display:none;z-index:-1}.zy-event-info:hover{display:block}.zy-comments{background-color:#fff;margin-top:100px}.items .item-title{font-size:150%}.items ul{list-style:none;padding-left:0}.items li{border-bottom:1px dashed #d9d9d9;padding:10px 0 15px}.todo{color:red}.done{color:green}.timestamp{color:gray}.timestamp-kwd{color:#f59ea0}.tag{background-color:#add8e6;font-weight:400}.target{background-color:#551a8b}span.underline{text-decoration:underline}.center,.figure{text-align:center}.figure{margin:30px 0}.figure p:last-child{font-size:13px;color:rgba(0,0,0,.6);text-align:center}.image-group-name{font-size:13px;color:rgba(0,0,0,.6);margin-bottom:8px}.figure-thumbnail{margin-bottom:7px;margin-right:1px;max-height:150px;box-shadow:0 0 10px rgba(0,0,0,.1)}div.half-left-float,p.half-left-float,table.half-left-float{float:left;width:50%;margin:10px;padding-right:10px}div.half-right-float,p.half-right-float,table.half-right-float{float:right;width:50%;margin:10px;padding-left:10px}.outline-1,.outline-2,.outline-3,.outline-4,.outline-5,.outline-6{clear:both}.hljs-comment,.hljs-quote{color:#8e908c}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c82829}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5871f}.hljs-attribute{color:#eab700}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#718c00}.hljs-section,.hljs-title{color:#4271ae}.hljs-keyword,.hljs-selector-tag{color:#8959a8}.hljs{display:block;overflow-x:auto;background:#fff;color:#4d4d4c;padding:.5em}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.fancybox-enabled{overflow:hidden}.fancybox-enabled body{overflow:visible;height:100%}.fancybox-is-hidden{position:absolute;top:-9999px;left:-9999px;visibility:hidden}.fancybox-container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99993;-webkit-tap-highlight-color:transparent;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform:translateZ(0)}.fancybox-container~.fancybox-container{z-index:99992}.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-stage{position:absolute;top:0;right:0;bottom:0;left:0}.fancybox-outer{overflow-y:auto;-webkit-overflow-scrolling:touch}.fancybox-bg{background:#1e1e1e;opacity:0;transition-duration:inherit;transition-property:opacity;transition-timing-function:cubic-bezier(.47,0,.74,.71)}.fancybox-is-open .fancybox-bg{opacity:.87;transition-timing-function:cubic-bezier(.22,.61,.36,1)}.fancybox-caption-wrap,.fancybox-infobar,.fancybox-toolbar{position:absolute;direction:ltr;z-index:99997;opacity:0;visibility:hidden;transition:opacity .25s,visibility 0s linear .25s;box-sizing:border-box}.fancybox-show-caption .fancybox-caption-wrap,.fancybox-show-infobar .fancybox-infobar,.fancybox-show-toolbar .fancybox-toolbar{opacity:1;visibility:visible;transition:opacity .25s,visibility 0s}.fancybox-infobar{top:0;left:50%;margin-left:-79px}.fancybox-infobar__body{display:inline-block;width:70px;line-height:44px;font-size:13px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;text-align:center;color:#ddd;background-color:rgba(30,30,30,.7);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;-webkit-font-smoothing:subpixel-antialiased}.fancybox-toolbar{top:0;right:0}.fancybox-stage{overflow:hidden;direction:ltr;z-index:99994;-webkit-transform:translateZ(0)}.fancybox-slide{position:absolute;top:0;left:0;width:100%;height:100%;margin:0;padding:0;overflow:auto;outline:none;white-space:normal;box-sizing:border-box;text-align:center;z-index:99994;-webkit-overflow-scrolling:touch;display:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;transition-property:transform,opacity;transform-style:preserve-3d}.fancybox-slide:before{content:"";display:inline-block;vertical-align:middle;height:100%;width:0}.fancybox-is-sliding .fancybox-slide,.fancybox-slide--current,.fancybox-slide--next,.fancybox-slide--previous{display:block}.fancybox-slide--image{overflow:visible}.fancybox-slide--image:before{display:none}.fancybox-slide--video .fancybox-content,.fancybox-slide--video iframe{background:#000}.fancybox-slide--map .fancybox-content,.fancybox-slide--map iframe{background:#e5e3df}.fancybox-slide--next{z-index:99995}.fancybox-slide>div{display:inline-block;position:relative;padding:24px;margin:44px 0;border-width:0;vertical-align:middle;text-align:left;background-color:#fff;overflow:auto;box-sizing:border-box}.fancybox-slide .fancybox-image-wrap{position:absolute;top:0;left:0;margin:0;padding:0;border:0;z-index:99995;background:transparent;cursor:default;overflow:visible;transform-origin:top left;background-size:100% 100%;background-repeat:no-repeat;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fancybox-can-zoomOut .fancybox-image-wrap{cursor:zoom-out}.fancybox-can-zoomIn .fancybox-image-wrap{cursor:zoom-in}.fancybox-can-drag .fancybox-image-wrap{cursor:-webkit-grab;cursor:grab}.fancybox-is-dragging .fancybox-image-wrap{cursor:-webkit-grabbing;cursor:grabbing}.fancybox-image,.fancybox-spaceball{position:absolute;top:0;left:0;width:100%;height:100%;margin:0;padding:0;border:0;max-width:none;max-height:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fancybox-spaceball{z-index:1}.fancybox-slide--iframe .fancybox-content{padding:0;width:80%;height:80%;max-width:calc(100% - 100px);max-height:calc(100% - 88px);overflow:visible;background:#fff}.fancybox-iframe{display:block;padding:0;border:0;height:100%}.fancybox-error,.fancybox-iframe{margin:0;width:100%;background:#fff}.fancybox-error{padding:40px;max-width:380px;cursor:default}.fancybox-error p{margin:0;padding:0;color:#444;font:16px/20px Helvetica Neue,Helvetica,Arial,sans-serif}.fancybox-close-small{position:absolute;top:0;right:0;width:44px;height:44px;padding:0;margin:0;border:0;border-radius:0;outline:none;background:transparent;z-index:10;cursor:pointer}.fancybox-close-small:after{content:"\D7";position:absolute;top:5px;right:5px;width:30px;height:30px;font:20px/30px Arial,Helvetica Neue,Helvetica,sans-serif;color:#888;font-weight:300;text-align:center;border-radius:50%;border-width:0;background:#fff;transition:background .25s;box-sizing:border-box;z-index:2}.fancybox-close-small:focus:after{outline:1px dotted #888}.fancybox-close-small:hover:after{color:#555;background:#eee}.fancybox-slide--iframe .fancybox-close-small{top:0;right:-44px}.fancybox-slide--iframe .fancybox-close-small:after{background:transparent;font-size:35px;color:#aaa}.fancybox-slide--iframe .fancybox-close-small:hover:after{color:#fff}.fancybox-caption-wrap{bottom:0;left:0;right:0;padding:60px 30px 0;background:linear-gradient(180deg,transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 40%,rgba(0,0,0,.6) 80%,rgba(0,0,0,.8));pointer-events:none}.fancybox-caption{padding:30px 0;border-top:1px solid hsla(0,0%,100%,.4);font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;color:#fff;line-height:20px;-webkit-text-size-adjust:none}.fancybox-caption a,.fancybox-caption button,.fancybox-caption select{pointer-events:all}.fancybox-caption a{color:#fff;text-decoration:underline}.fancybox-button{display:inline-block;position:relative;margin:0;padding:0;border:0;width:44px;height:44px;line-height:44px;text-align:center;background:transparent;color:#ddd;border-radius:0;cursor:pointer;vertical-align:top;outline:none}.fancybox-button[disabled]{cursor:default;pointer-events:none}.fancybox-button,.fancybox-infobar__body{background:rgba(30,30,30,.6)}.fancybox-button:hover:not([disabled]){color:#fff;background:rgba(0,0,0,.8)}.fancybox-button:after,.fancybox-button:before{content:"";pointer-events:none;position:absolute;background-color:currentColor;color:currentColor;opacity:.9;box-sizing:border-box;display:inline-block}.fancybox-button[disabled]:after,.fancybox-button[disabled]:before{opacity:.3}.fancybox-button--left:after,.fancybox-button--right:after{top:18px;width:6px;height:6px;background:transparent;border-top:2px solid currentColor;border-right:2px solid currentColor}.fancybox-button--left:after{left:20px;transform:rotate(-135deg)}.fancybox-button--right:after{right:20px;transform:rotate(45deg)}.fancybox-button--left{border-bottom-left-radius:5px}.fancybox-button--right{border-bottom-right-radius:5px}.fancybox-button--close:after,.fancybox-button--close:before{content:"";display:inline-block;position:absolute;height:2px;width:16px;top:calc(50% - 1px);left:calc(50% - 8px)}.fancybox-button--close:before{transform:rotate(45deg)}.fancybox-button--close:after{transform:rotate(-45deg)}.fancybox-arrow{position:absolute;top:50%;margin:-50px 0 0;height:100px;width:54px;padding:0;border:0;outline:none;background:none;cursor:pointer;z-index:99995;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:opacity .25s}.fancybox-arrow:after{content:"";position:absolute;top:28px;width:44px;height:44px;background-color:rgba(30,30,30,.8);background-image:url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjQ4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSI0OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4gICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPiAgICA8cGF0aCBkPSJNMTIgNGwtMS40MSAxLjQxTDE2LjE3IDExSDR2MmgxMi4xN2wtNS41OCA1LjU5TDEyIDIwbDgtOHoiLz48L3N2Zz4=);background-repeat:no-repeat;background-position:50%;background-size:24px 24px}.fancybox-arrow--right{right:0}.fancybox-arrow--left{left:0;transform:scaleX(-1)}.fancybox-arrow--left:after,.fancybox-arrow--right:after{left:0}.fancybox-show-nav .fancybox-arrow{opacity:.6}.fancybox-show-nav .fancybox-arrow[disabled]{opacity:.3}.fancybox-slide>.fancybox-loading{border:6px solid rgba(99,99,99,.4);border-top:6px solid hsla(0,0%,100%,.6);border-radius:100%;height:50px;width:50px;animation:a .8s infinite linear;background:transparent;position:absolute;top:50%;left:50%;margin-top:-25px;margin-left:-25px;z-index:99999}@keyframes a{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}.fancybox-animated{transition-timing-function:cubic-bezier(0,0,.25,1)}.fancybox-fx-slide.fancybox-slide--previous{transform:translate3d(-100%,0,0);opacity:0}.fancybox-fx-slide.fancybox-slide--next{transform:translate3d(100%,0,0);opacity:0}.fancybox-fx-slide.fancybox-slide--current{transform:translateZ(0);opacity:1}.fancybox-fx-fade.fancybox-slide--next,.fancybox-fx-fade.fancybox-slide--previous{opacity:0;transition-timing-function:cubic-bezier(.19,1,.22,1)}.fancybox-fx-fade.fancybox-slide--current{opacity:1}.fancybox-fx-zoom-in-out.fancybox-slide--previous{transform:scale3d(1.5,1.5,1.5);opacity:0}.fancybox-fx-zoom-in-out.fancybox-slide--next{transform:scale3d(.5,.5,.5);opacity:0}.fancybox-fx-zoom-in-out.fancybox-slide--current{transform:scaleX(1);opacity:1}.fancybox-fx-rotate.fancybox-slide--previous{transform:rotate(-1turn);opacity:0}.fancybox-fx-rotate.fancybox-slide--next{transform:rotate(1turn);opacity:0}.fancybox-fx-rotate.fancybox-slide--current{transform:rotate(0deg);opacity:1}.fancybox-fx-circular.fancybox-slide--previous{transform:scale3d(0,0,0) translate3d(-100%,0,0);opacity:0}.fancybox-fx-circular.fancybox-slide--next{transform:scale3d(0,0,0) translate3d(100%,0,0);opacity:0}.fancybox-fx-circular.fancybox-slide--current{transform:scaleX(1) translateZ(0);opacity:1}.fancybox-fx-tube.fancybox-slide--previous{transform:translate3d(-100%,0,0) scale(.1) skew(-10deg)}.fancybox-fx-tube.fancybox-slide--next{transform:translate3d(100%,0,0) scale(.1) skew(10deg)}.fancybox-fx-tube.fancybox-slide--current{transform:translateZ(0) scale(1)}@media (max-width:800px){.fancybox-infobar{left:0;margin-left:0}.fancybox-button--left,.fancybox-button--right{display:none!important}.fancybox-caption{padding:20px 0;margin:0}}.fancybox-button--fullscreen:before{width:15px;height:11px;left:calc(50% - 7px);top:calc(50% - 6px);border:2px solid;background:none}.fancybox-button--pause:before,.fancybox-button--play:before{top:calc(50% - 6px);left:calc(50% - 4px);background:transparent}.fancybox-button--play:before{width:0;height:0;border-top:6px inset transparent;border-bottom:6px inset transparent;border-left:10px solid;border-radius:1px}.fancybox-button--pause:before{width:7px;height:11px;border-style:solid;border-width:0 2px}.fancybox-button--thumbs,.fancybox-thumbs{display:none}@media (min-width:800px){.fancybox-button--thumbs{display:inline-block}.fancybox-button--thumbs span{font-size:23px}.fancybox-button--thumbs:before{width:3px;height:3px;top:calc(50% - 2px);left:calc(50% - 2px);box-shadow:0 -4px 0,-4px -4px 0,4px -4px 0,inset 0 0 0 32px,-4px 0 0,4px 0 0,0 4px 0,-4px 4px 0,4px 4px 0}.fancybox-thumbs{position:absolute;top:0;right:0;bottom:0;left:auto;width:220px;margin:0;padding:5px 5px 0 0;background:#fff;word-break:normal;-webkit-tap-highlight-color:transparent;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar;box-sizing:border-box;z-index:99995}.fancybox-show-thumbs .fancybox-thumbs{display:block}.fancybox-show-thumbs .fancybox-inner{right:220px}.fancybox-thumbs>ul{list-style:none;position:absolute;position:relative;width:100%;height:100%;margin:0;padding:0;overflow-x:hidden;overflow-y:auto;font-size:0}.fancybox-thumbs>ul>li{float:left;overflow:hidden;max-width:50%;padding:0;margin:0;width:105px;height:75px;position:relative;cursor:pointer;outline:none;border:5px solid transparent;border-top-width:0;border-right-width:0;-webkit-tap-highlight-color:transparent;-webkit-backface-visibility:hidden;backface-visibility:hidden;box-sizing:border-box}li.fancybox-thumbs-loading{background:rgba(0,0,0,.1)}.fancybox-thumbs>ul>li>img{position:absolute;top:0;left:0;min-width:100%;min-height:100%;max-width:none;max-height:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fancybox-thumbs>ul>li:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:2px;border:4px solid #4ea7f9;z-index:99991;opacity:0;transition:all .2s cubic-bezier(.25,.46,.45,.94)}.fancybox-thumbs>ul>li.fancybox-thumbs-active:before{opacity:1}}</style></head><body><div id="react-mount"><div data-reactroot="" data-reactid="1" data-react-checksum="-141989028"><nav class="navbar" id="header" data-reactid="2"><div class="container" data-reactid="3"><div class="navbar-header" data-reactid="4"><a class="navbar-brand" href="/" data-reactid="5">仲之地</a></div><div class="navbar-collapse collapse bs-navbar-collapse" data-reactid="6"><ul class="nav navbar-nav" data-reactid="7"><li data-reactid="8"><!-- react-text: 9 --> <!-- /react-text --><a class="navbar-item" href="/blog/" data-reactid="10">Blog</a><!-- react-text: 11 --> <!-- /react-text --></li><li data-reactid="12"><!-- react-text: 13 --> <!-- /react-text --><a class="navbar-item" href="/notes/" data-reactid="14">笔记</a><!-- react-text: 15 --> <!-- /react-text --></li><li data-reactid="16"><!-- react-text: 17 --> <!-- /react-text --><a class="navbar-item" href="/archives/" data-reactid="18">归档</a><!-- react-text: 19 --> <!-- /react-text --></li><li data-reactid="20"><!-- react-text: 21 --> <!-- /react-text --><a class="navbar-item" href="/timeline/" data-reactid="22">时间线</a><!-- react-text: 23 --> <!-- /react-text --></li><li data-reactid="24"><!-- react-text: 25 --> <!-- /react-text --><a class="navbar-item" href="/reading/notes/" data-reactid="26">读书笔记</a><!-- react-text: 27 --> <!-- /react-text --></li><li data-reactid="28"><!-- react-text: 29 --> <!-- /react-text --><a class="navbar-item" href="/about/" data-reactid="30">关于</a><!-- react-text: 31 --> <!-- /react-text --></li></ul></div></div></nav><div class="container m-t" data-reactid="32"><div class="note" data-reactid="33"><!-- react-empty: 34 --><h1 data-reactid="35">Django</h1><div class="pageMeta" data-reactid="36"><span data-reactid="37">2014-03-06</span></div><div class="row" data-reactid="38"><div class="col-md-9" data-reactid="39"><div data-reactid="40"><div class="tocInline"><h2>目录</h2><ul class="nav-toc"><li><a href="#1"><span class="section-number">1</span>前言</a></li>
<li><a href="#2"><span class="section-number">2</span>资料收集</a><ul class="nav-toc"><li><a href="#2-1"><span class="section-number">2.1</span>文档</a></li>
<li><a href="#2-2"><span class="section-number">2.2</span>文章</a></li>
<li><a href="#2-3"><span class="section-number">2.3</span>项目</a></li>
</ul>
</li>
<li><a href="#3"><span class="section-number">3</span>安装和部署</a><ul class="nav-toc"><li><a href="#3-1"><span class="section-number">3.1</span>安装 Django</a></li>
<li><a href="#3-2"><span class="section-number">3.2</span>部署 Django 应用</a></li>
</ul>
</li>
<li><a href="#4"><span class="section-number">4</span>阅读 Djaogo 文档</a><ul class="nav-toc"><li><a href="#4-1"><span class="section-number">4.1</span>Part 1: Start a project and ORM</a></li>
<li><a href="#4-2"><span class="section-number">4.2</span>Part 2: Admin interface</a></li>
<li><a href="#4-3"><span class="section-number">4.3</span>Part 3: Views and template system</a></li>
<li><a href="#4-4"><span class="section-number">4.4</span>Part 4: Action in view and generic views</a></li>
<li><a href="#4-5"><span class="section-number">4.5</span>TODO Part 5: Testing</a></li>
<li><a href="#4-6"><span class="section-number">4.6</span>Part 6</a></li>
</ul>
</li>
<li><a href="#5"><span class="section-number">5</span>Django 第三方</a><ul class="nav-toc"><li><a href="#5-1"><span class="section-number">5.1</span>Django REST framework </a></li>
<li><a href="#5-2"><span class="section-number">5.2</span>Django import/export</a></li>
<li><a href="#20150805"><span class="section-number">20150805</span>使用 Django cas 实现单点登录 &#60;2015-08-05 三&#62;</a></li>
</ul>
</li>
<li><a href="#6"><span class="section-number">6</span>Django Models</a><ul class="nav-toc"><li><a href="#6-1"><span class="section-number">6.1</span>字段</a></li>
<li><a href="#6-2"><span class="section-number">6.2</span>Relationships</a></li>
<li><a href="#6-3"><span class="section-number">6.3</span>Django Model 的查询语法</a></li>
<li><a href="#6-4"><span class="section-number">6.4</span>Aggregation, values and annotations</a></li>
<li><a href="#6-5"><span class="section-number">6.5</span>Legacy Database（非 Django ORM 生成和管理的数据库）</a></li>
<li><a href="#6-6"><span class="section-number">6.6</span>Multiple Databases</a></li>
<li><a href="#6-7"><span class="section-number">6.7</span>null=True and blank=True</a></li>
<li><a href="#20160731_2141"><span class="section-number">20160731_2141</span>在Django应用之外使用Django Models &#60;2016-07-31 日 21:41&#62;</a></li>
<li><a href="#20170814_2056"><span class="section-number">20170814_2056</span>在Django中执行 Raw SQL &#60;2017-08-14 一 20:56&#62;</a></li>
<li><a href="#20170709_1331"><span class="section-number">20170709_1331</span>根据字段名判断Model存不存在某字段的定义 &#60;2017-07-09 日 13:31&#62;</a></li>
</ul>
</li>
<li><a href="#7"><span class="section-number">7</span>Django Route</a><ul class="nav-toc"><li><a href="#20170331_1628"><span class="section-number">20170331_1628</span>通过reverse来在redirect时实现动态构造URL &#60;2017-03-31 五 16:28&#62;</a></li>
</ul>
</li>
<li><a href="#8"><span class="section-number">8</span>Django Template</a><ul class="nav-toc"><li><a href="#8-1"><span class="section-number">8.1</span>extends（继承）</a></li>
<li><a href="#20160720"><span class="section-number">20160720</span>在Django中使用Jinja2 &#60;2016-07-20 三&#62;</a></li>
<li><a href="#20160822_0408"><span class="section-number">20160822_0408</span>自定义filter和tag &#60;2016-08-22 一 04:08&#62;</a></li>
<li><a href="#20161203_1455"><span class="section-number">20161203_1455</span>自定义filter时，使输出的HTML不被转义 &#60;2016-12-03 六 14:55&#62;</a></li>
</ul>
</li>
<li><a href="#9"><span class="section-number">9</span>Django Forms</a><ul class="nav-toc"><li><a href="#20160814_2222"><span class="section-number">20160814_2222</span>Django Forms应用经验 &#60;2016-08-14 日 22:22&#62;</a></li>
<li><a href="#20160816_2023"><span class="section-number">20160816_2023</span>如何在一次请求提交多个表单？ &#60;2016-08-16 二 20:23&#62;</a></li>
<li><a href="#20160816_2228"><span class="section-number">20160816_2228</span>处理ModelForm中的Foreign Key字段 &#60;2016-08-16 二 22:28&#62;</a></li>
<li><a href="#20160817_1839"><span class="section-number">20160817_1839</span>提交表单后，在views中检验表单前，修改表单字段值 &#60;2016-08-17 三 18:39&#62;</a></li>
<li><a href="#20160818_2339"><span class="section-number">20160818_2339</span>如何非form中发起POST请求时关闭csrf保护以解决403错误？ &#60;2016-08-18 四 23:39&#62;</a></li>
</ul>
</li>
<li><a href="#10"><span class="section-number">10</span>Django Logging</a><ul class="nav-toc"><li><a href="#20150331"><span class="section-number">20150331</span>Django 使用 Python 内建的 logging 模块 &#60;2015-03-31 二&#62;</a></li>
<li><a href="#10-2"><span class="section-number">10.2</span>使用 Python logging</a></li>
</ul>
</li>
<li><a href="#11"><span class="section-number">11</span>Django Management Commands</a></li>
<li><a href="#12"><span class="section-number">12</span>Django Admin</a><ul class="nav-toc"><li><a href="#12-1"><span class="section-number">12.1</span>自定义 Action</a></li>
<li><a href="#12-2"><span class="section-number">12.2</span>自定义 Admin 页面的外观</a></li>
</ul>
</li>
<li><a href="#13"><span class="section-number">13</span>Django Unittest</a></li>
<li><a href="#14"><span class="section-number">14</span>邮件和短信</a></li>
<li><a href="#15"><span class="section-number">15</span>Middleware</a><ul class="nav-toc"><li><a href="#20150614"><span class="section-number">20150614</span>将异常调用栈打印出来（通过 Middleware） &#60;2015-06-14 日&#62;</a></li>
</ul>
</li>
<li><a href="#16"><span class="section-number">16</span>问题记录</a><ul class="nav-toc"><li><a href="#16-1"><span class="section-number">16.1</span>css 文件有时候需要重启 server 才能生效</a></li>
<li><a href="#16-2"><span class="section-number">16.2</span>TODO 线上部署时是 static 文件寻址</a></li>
<li><a href="#16-3"><span class="section-number">16.3</span>WSGIPythonPath cannot occur within &#60;VirtualHost&#62; section</a></li>
<li><a href="#16-4"><span class="section-number">16.4</span>OperationalError: unable to open database file</a></li>
<li><a href="#16-5"><span class="section-number">16.5</span>TypeError: can&#39;t compare offset-naive and offset-aware datetimes</a></li>
<li><a href="#16-6"><span class="section-number">16.6</span>Unsafe statement written to the binary log using statement format since BINLOG_FORMAT = STATEMENT</a></li>
<li><a href="#16-7"><span class="section-number">16.7</span>通过 Admin 页面新增对象时，抛出 Error creating new content types. Please make sure contenttypes is migrated before trying to migrate apps individually.</a></li>
<li><a href="#16-8"><span class="section-number">16.8</span>当 DEBUG = False 时找不到 static 文件，除非 python manage.py runserver --insecure </a></li>
<li><a href="#16-9"><span class="section-number">16.9</span>ADMINS 的值是个 tuple 的 tuple，后面有个逗号</a></li>
<li><a href="#20160817_0249"><span class="section-number">20160817_0249</span>[Errno socket error] [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590) &#60;2016-08-17 三 02:49&#62;</a></li>
<li><a href="#20160821_1933"><span class="section-number">20160821_1933</span>首次线上部署时，执行 python manage.py makemigrations 没有如预期地生成迁移指令 &#60;2016-08-21 日 19:33&#62;</a></li>
<li><a href="#20161125_0926"><span class="section-number">20161125_0926</span>django.core.exceptions.AppRegistryNotReady: Apps aren&#39;t loaded yet. &#60;2016-11-25 五 09:26&#62;</a></li>
</ul>
</li>
<li><a href="#17"><span class="section-number">17</span>回顾</a><ul class="nav-toc"><li><a href="#20140301"><span class="section-number">20140301</span>看完了官方 Tutorial &#60;2014-03-01 六&#62;</a></li>
<li><a href="#20150327"><span class="section-number">20150327</span>再度使用 Django &#60;2015-03-27 五&#62;</a></li>
<li><a href="#20150619"><span class="section-number">20150619</span>Django 还是很挫的 &#60;2015-06-19 五&#62;</a></li>
</ul>
</li>
</ul>
</div><h2 id="1"><span class="section-number">1</span>前言</h2>
<p>今年过年在家学了一轮 Ruby on Rails，后来由于兴趣转移，决定专精 Python，于是
顺手学了一下 Django。</p>
<p>Django 官网的描述：</p>
<blockquote><p>Django is a high-level Python Web framework that encourages rapid development and clean, pragmatic design.</p>
</blockquote>
<p>Django 的特性</p>
<ul><li>Object-relational mapper（对象关系映射）</li>
<li>Automatic admin interface（自动生成管理员界面）</li>
<li>Elegant URL design（优雅的 URL 设计）</li>
<li>Template system（模板系统）</li>
<li>Cache system（缓存系统）</li>
<li>Internationalization（国际化支持）</li>
</ul>
<h2 id="2"><span class="section-number">2</span>资料收集</h2>
<h3 id="2-1"><span class="section-number">2.1</span>文档</h3>
<ul><li><a href="https://docs.djangoproject.com/">Django documentation</a></li>
</ul>
<h3 id="2-2"><span class="section-number">2.2</span>文章</h3>
<ul><li><a href="http://stackoverflow.com/questions/1499543/good-open-source-django-project-for-learning">Good open source django project for learning</a></li>
<li><a href="http://docs.django-blog-zinnia.com/en/v0.14/index.html">Django-Blog-Zinnia’s documentation!</a></li>
<li><a href="https://code.djangoproject.com/wiki/DjangoResources#Djangobooks">Django resources</a></li>
<li><a href="http://www.djangobook.com/en/2.0/index.html">The Django Book (The Definitive Guide to Django: Web Development Done Right)</a></li>
<li><a href="http://www.reddit.com/r/django/comments/1c5u23/excellent_open_source_django_projects_to_learn/">Excellent open source Django projects to learn from?</a></li>
</ul>
<h3 id="2-3"><span class="section-number">2.3</span>项目</h3>
<ul><li><a href="https://github.com/torchbox/wagtail"><a href="https://github.com/torchbox/wagtail">https://github.com/torchbox/wagtail</a></a></li>
<li><a href="https://github.com/stephenmcd/mezzanine"><a href="https://github.com/stephenmcd/mezzanine">https://github.com/stephenmcd/mezzanine</a></a></li>
<li><a href="https://github.com/Fantomas42/django-blog-zinnia"><a href="https://github.com/Fantomas42/django-blog-zinnia">https://github.com/Fantomas42/django-blog-zinnia</a></a></li>
</ul>
<p>Django App</p>
<ul><li><a href="https://github.com/rossp/django-helpdesk">django-helpdesk - A Django powered ticket tracker for small enterprise</a></li>
</ul>
<h2 id="3"><span class="section-number">3</span>安装和部署</h2>
<h3 id="3-1"><span class="section-number">3.1</span>安装 Django</h3>
<p>看了下 Django 的<a href="https://docs.djangoproject.com/en/1.6/intro/install/">官方安装指南</a> ，发现 Django 的安装非常简易（至少在 Mac 下如此）。我执行:</p>
<pre class="prettyprint"><code class="language-sh">sudo pip install Django</code>
</pre>
<p>安装完毕，然后在 Python 解释器下验证安装结果。如下：</p>
<pre class="prettyprint"><code class="language-python">&#62;&#62;&#62; import django
&#62;&#62;&#62; print (django.get_version())
1.6.2</code>
</pre>
<p>于是，Django 已经安装好了</p>
<h3 id="3-2"><span class="section-number">3.2</span>部署 Django 应用</h3>
<p>参考：</p>
<ul><li><a href="https://docs.djangoproject.com/en/1.6/howto/deployment/wsgi/">How to deploy with WSGI</a></li>
<li><a href="https://docs.djangoproject.com/en/1.6/howto/deployment/wsgi/modwsgi/">How to use Django with Apache and mod_wsgi</a></li>
<li><a href="https://library.linode.com/frameworks/django-apache-mod-wsgi/ubuntu-10.04-lucid">Django, Apache and mod_wsgi on Ubuntu 10.04 (Lucid)</a></li>
<li><a href="https://www.digitalocean.com/community/articles/how-to-configure-the-apache-web-server-on-an-ubuntu-or-debian-vps">How To Configure the Apache Web Server on an Ubuntu or Debian VPS</a></li>
<li><a href="http://stackoverflow.com/questions/1020390/how-do-i-run-django-and-php-together-on-one-apache-server">How do I run Django and PHP together on one Apache server?</a></li>
</ul>
<p>我选择了 mod_wsgi。Apache2 的配置文件是 <b>/etc/apache2/sites-available/default</b> ，
log 目录为 <b>/var/log/apache2</b> 。重启 Apache2 的指令是：</p>
<pre class="prettyprint"><code class="language-sh">/etc/init.d/apache2 restarto</code>
</pre>
<p>对于 Apache 的 module 和配置，我很不熟悉，还好最后搞出来了。</p>
<h2 id="4"><span class="section-number">4</span>阅读 Djaogo 文档</h2>
<p><a href="https://docs.djangoproject.com/en/1.6/">Django documentation</a></p>
<p>执行下面几步后，一个 Django app 就已经运行并拥有自己的 admin 界面了。</p>
<pre class="prettyprint"><code class="language-sh">django-admin.py startproject mysite
cd mysite
python manage.py syncdb
python manage.py runserver</code>
</pre>
<h3 id="4-1"><span class="section-number">4.1</span>Part 1: Start a project and ORM</h3>
<p>本章讲述了如何创建一个 project，如何创建一个 app，如何创建 model。有两个要点：</p>
<ul><li>Projects vs. apps</li>
<li>Philosophy (of model)</li>
</ul>
<p>每个 model 都与数据库中的某张表相关，Django 的 <b>对象关系映射（ORM）</b> 特性让我们可以通过调用
对象来操纵数据库，例如调用对象的 save()就代表将该对象以一条记录的形式插入到数据库。</p>
<h3 id="4-2"><span class="section-number">4.2</span>Part 2: Admin interface</h3>
<p>本章给我们秀了 Django 的 <b>管理员界面</b> ，用户不需要一行特别的代码，就能拥有良好的管
理员界面。它还特别提到，管理员界面是用 Django 自身来实现的。用户可以定制管理员界面，
通过修改自己的 app 下面的 admin.py 文件。</p>
<p>本章后面提到了 Django 的 <b>模板系统</b> ，建议我们将 Django 默认的模块拷贝到自己项目里然
后更改。</p>
<h3 id="4-3"><span class="section-number">4.3</span>Part 3: Views and template system</h3>
<p>本章开始将 Django 的 views 了。Django 的 url 设计得很优雅，它通过一些机制来将 url 来分发给
相应的 view。</p>
<p>project 的 url.py 负责将请求根据 url 来分发给各个 app，而 app 的 url.py 则负责将请求根据
url 开分发给各个 view。Django 是根据预设的 url 正则表达式来进行请求分发的。</p>
<h4 id="4-3-1"><span class="section-number">4.3.1</span>Django 的 views 可以做什么？</h4>
<p>Django 的 views 的主要职责是生成网页内容，并通过 HttpResponse 对象来返回给浏览器。如果
异常了，它还得返回一个 404 页面(Http404 对象）啥的。</p>
<p>Django 的 views 具体可以做：</p>
<ul><li>从数据库读取记录</li>
<li>调用 Django 或第三方的模板系统</li>
<li>生成 PDF 文件，或输出 XML</li>
<li>生成 ZIP 文件来供下载</li>
<li>以及其他任何 Python 能干的事情</li>
</ul>
<h4 id="4-3-2"><span class="section-number">4.3.2</span>Django 的模板系统</h4>
<p>Django 的模板系统看起来非常眼熟，跟我去年研究过的 Jinja2 语法几乎一样，但是 Django 的
模板的语法据说很薄弱。</p>
<p>view 调用模板渲染函数时，Django 提供了两个捷径：</p>
<ul><li><a href="https://docs.djangoproject.com/en/1.6/topics/http/shortcuts/#django.shortcuts.render">django.shortcuts.render</a></li>
<li><a href="https://docs.djangoproject.com/en/1.6/topics/http/shortcuts/#django.shortcuts.get_object_or_404">django.shortcut.get_object_or_404</a></li>
</ul>
<p>使用它们可以减少好几行代码和去掉异常分支，赞！</p>
<p>模板中可以使用 url 变量来避免硬编码，但这样做可能会带来命名冲突，因为一个 project 下
可能会有几十个 app，这些 app 下的 view 的命名极可能重复。为了解决这个问题，Django 提供
了 <b>Namespacing URL names</b> 机制。</p>
<h3 id="4-4"><span class="section-number">4.4</span>Part 4: Action in view and generic views</h3>
<p>本章继续将模板和 view，实现了 vote（投票）和 result（查看投票结果）功能。最后提到了
<b>generic views</b> ，它们是 Django 提供通用 view，用来快速满足 web 开发中一些通用场景。例如：</p>
<ul><li>generic.ListView</li>
<li>generic.DetailView</li>
</ul>
<p>用户需要在 views.py 中集成这些类，然后告诉它 model 是啥，template 是啥，剩下的交割这些
<b>generic views</b> 就好了。</p>
<p>这章我看得不仔细，以后遇到问题了再翻翻。</p>
<h3 id="4-5" class="task-status todo"><span class="section-number">4.5</span><span class="task-status todo">TODO</span>Part 5: Testing</h3>
<p>这章讲如何在 Django 下进行测试，以及自动化测试相关的内容。暂时用不着，以后看。</p>
<h3 id="4-6"><span class="section-number">4.6</span>Part 6</h3>
<p>这一章很简短，介绍如何修改 style.css 来定制 app 的外观。重点是如何组织 app 的 statis 文件
的目录。</p>
<h2 id="5"><span class="section-number">5</span>Django 第三方</h2>
<h3 id="5-1"><span class="section-number">5.1</span>Django REST framework </h3>
<ul><li><a href="http://www.django-rest-framework.org/"><a href="http://www.django-rest-framework.org/">http://www.django-rest-framework.org/</a></a></li>
</ul>
<h3 id="5-2"><span class="section-number">5.2</span>Django import/export</h3>
<ul><li><a href="http://django-import-export.readthedocs.org/en/latest/index.html">http://django-import-export.readthedocs.org/en/latest/index.html</a></li>
</ul>
<h4 id="5-2-1"><span class="section-number">5.2.1</span>问题：ImportError: No module named related</h4>
<p>原因：通过 pip 安装的 django-import-export 与 Django 1.8 不兼容。</p>
<p>解决：从 GitHub 上下载安装最新的开发中版本。</p>
<h3 id="20150805"><span class="section-number">20150805</span>使用 Django cas 实现单点登录 &#60;2015-08-05 三&#62;</h3>
<ul><li><a href="https://github.com/kstateome/django-cas">https://github.com/kstateome/django-cas</a></li>
</ul>
<p>要点：</p>
<ol><li>urls.py 里设定登录和登出的 url，指向 cas.views.login 和 cas.views.logout</li>
<li>默认情况下，单点登录后会重定向到首页，但是我们在登录的 url 后面可以加上<p>next=xxx 参数，这样登录可以重定向到 xxx 页面（一般是登录前的页面）</p>
</li>
</ol>
<p>在 AngularJS 环境下，还有几个要点：</p>
<ol><li>可以在一个必然被执行的 Controller 里来从后端获取登录信息。如果未登录，则<p>跳转到上面提到的登录的 url。</p>
</li>
<li>AngularJS 的 url 中经常含有 <code>#</code> ，将其作为 next 的参数会发生问题，我们需<p>要对这个 url 执行 url encode。 <code>#</code> 被 url encode 后变为 <code>%23</code> 。 <code>&#38;</code> 也
要做类似处理。总之，作为 next 参数的值，url 需要转义。如果没人帮我们转义，
辣么就要我们自己转义。</p>
</li>
</ol>
<h2 id="6"><span class="section-number">6</span>Django Models</h2>
<h3 id="6-1"><span class="section-number">6.1</span>字段</h3>
<ul><li>每个 Model 隐式创建一个 id 字段，它的类型是 AutoField。</li>
</ul>
<h3 id="6-2"><span class="section-number">6.2</span>Relationships</h3>
<ul><li><a href="https://docs.djangoproject.com/en/1.8/topics/db/models/#relationships">Django Model Relationships (1.8)</a></li>
</ul>
<p>很显然，关系型数据库的强力之处（之一）在于表和表之间的相互关联。Django 提供
了三种最通用的数据库关系类型：</p>
<ul><li>Many-to-one (Foreign Key)</li>
<li>Many-to-many</li>
<li>One-to-one<p></p>
</li>
</ul>
<h4 id="20150421"><span class="section-number">20150421</span>Many-to-many Relationships &#60;2015-04-21 二&#62;</h4>
<p>实例：一个日志可能会被多个 Dag 任务使用，而一个 Dag 任务也可能使用多份日志。</p>
<p>ManyToManyField 可以定义在相关联的两个 Model 的任意一个之中，但不能在两个之
中都定义。</p>
<p>如果多对多的关系中除了关系本身，还有其他额外的信息要记录的话，我们可以使用
<code>through</code> 参数，并需要额外定义一个 Model 来描述这个关系。例如：</p>
<pre class="prettyprint"><code class="language-python">...
class Person(models.Model):
    name = models.CharField(max_length=128)
... 
class Group(models.Model):
    name = models.CharField(max_length=128)
    members = models.ManyToManyField(Person, through=&#39;Membership&#39;)
... 
class Membership(models.Model):
    person = models.ForeignKey(Person)
    group = models.ForeignKey(Group)
    date_joined = models.DateField()
    invite_reason = models.CharField(max_length=64)</code>
</pre>
<p>在使用 <code>through</code> 的情况下，我们在创建这些 Model 的对象时，不能直接通过
<code>add</code> / <code>create</code> / <code>赋值</code> 来创建关系，而应该先创建关系两头的 Model 对象，然
后在以这两个对象以及关系的的额外字段为参数来创建关系。例如：</p>
<pre class="prettyprint"><code class="language-python">&#62;&#62;&#62; ringo = Person.objects.create(name=&#34;Ringo Starr&#34;)
&#62;&#62;&#62; paul = Person.objects.create(name=&#34;Paul McCartney&#34;)
&#62;&#62;&#62; beatles = Group.objects.create(name=&#34;The Beatles&#34;)
&#62;&#62;&#62; m1 = Membership(person=ringo, group=beatles,
...     date_joined=date(1962, 8, 16),
...     invite_reason=&#34;Needed a new drummer.&#34;)
&#62;&#62;&#62; m1.save()</code>
</pre>
<h3 id="6-3"><span class="section-number">6.3</span>Django Model 的查询语法</h3>
<ul><li><a href="https://docs.djangoproject.com/en/1.8/topics/db/queries">Django Making queries (v1.8)</a></li>
</ul>
<p>Django Model 的查询是以 QuerySet 这个数据结构为核心，并支持链式查询。</p>
<table><tbody><tr><th><p>查询条件           </p>
</th>
<th><p>语法                            </p>
</th>
<th><p>说明                               </p>
</th>
</tr>
<tr><td><p>返回全集           </p>
</td>
<td><p>objects.all()                   </p>
</td>
<td><p></p>
</td>
</tr>
<tr><td><p>等于               </p>
</td>
<td><p>objects.filter(xx=yy)           </p>
</td>
<td><p></p>
</td>
</tr>
<tr><td><p>不等于             </p>
</td>
<td><p>objects.exclude(xx=yy)          </p>
</td>
<td><p></p>
</td>
</tr>
<tr><td><p>大于等于           </p>
</td>
<td><p>objects.filter(xx__gte=yy)       </p>
</td>
<td><p></p>
</td>
</tr>
<tr><td><p>小于               </p>
</td>
<td><p>objects.filter(xx__lt=yy)        </p>
</td>
<td><p></p>
</td>
</tr>
<tr><td><p>where in           </p>
</td>
<td><p>objects.filter(xx__in=yys)       </p>
</td>
<td><p></p>
</td>
</tr>
<tr><td><p>where not in       </p>
</td>
<td><p>objects.exclude(xx__in=yys)      </p>
</td>
<td><p></p>
</td>
</tr>
<tr><td><p>按字段排序（正序） </p>
</td>
<td><p>objects.order_by(&#39;xx&#39;)           </p>
</td>
<td><p></p>
</td>
</tr>
<tr><td><p>按字段排序（倒序） </p>
</td>
<td><p>objects.order_by(&#39;-xx&#39;)          </p>
</td>
<td><p></p>
</td>
</tr>
<tr><td><p>xx like &#39;%yy%&#39;     </p>
</td>
<td><p>objects.filter(xx__contains=&#39;yy&#39;) </p>
</td>
<td><p>如果大小写不敏感，则使用 icontains </p>
</td>
</tr>
<tr><td><p>xx like &#39;yy%&#39;      </p>
</td>
<td><p>objects.filter(xx__startswith=&#39;yy&#39;) </p>
</td>
<td><p>同上，使用 istartswith             </p>
</td>
</tr>
<tr><td><p>xx like &#39;%yy&#39;      </p>
</td>
<td><p>objects.filter(xx__endswith=&#39;yy&#39;) </p>
</td>
<td><p>同上，使用 iendswith          </p>
</td>
</tr>
<tr><td><p></p>
</td>
<td><p></p>
</td>
<td><p></p>
</td>
</tr>
</tbody>
</table>
<h3 id="6-4"><span class="section-number">6.4</span>Aggregation, values and annotations</h3>
<ul><li><a href="https://docs.djangoproject.com/en/1.8/topics/db/aggregation/">Django Model Aggregation (1.8)</a></li>
</ul>
<p>给个具体例子吧。下面是一个普通的 group by + 聚集的 SQL，我们想要将它改造为
Django ORM 的方式。</p>
<p>SQL：</p>
<pre class="prettyprint"><code class="language-sql">select log_module_id, count(base_time), min(base_time), max(base_time) from data_slice where base_time &#62;= &#39;2015-04-01 00:00:00&#39; group by log_module_id;</code>
</pre>
<p>改造后的 Django ORM：</p>
<pre class="prettyprint"><code class="language-python">query_set = DataSlice.objects.values(&#39;log_module_id&#39;).annotate(max_bt=Max(&#39;base_time&#39;), min_bt=Min(&#39;base_time&#39;), cnt=Count(&#39;base_time&#39;))</code>
</pre>
<h3 id="6-5"><span class="section-number">6.5</span>Legacy Database（非 Django ORM 生成和管理的数据库）</h3>
<p>所谓 <b>Legacy Database</b> 就是指那些以前项目遗留的，没有通过 Django ORM 来生成
和管理的数据库。Django 提供 inspectdb 命令，来根据 Legacy 数据库的表结构来
自动生成 models.py。</p>
<pre class="prettyprint"><code class="language-sh">python manage.py inspectdb &#62; legacy_models.py</code>
</pre>
<h4 id="20150402"><span class="section-number">20150402</span>标记位：Model::Meta::managedb &#60;2015-04-02 四&#62;</h4>
<p>注意 Meta 子类的 managedb 变量。Legacy 数据库通过 inpectdb 命令生成的 Model
的 Meta 子类的 managedb 变量被置为 False，即指明该 Model 不被 Django ORM 所
管理，无论是 <b>数据库迁移</b> 或者是 <b>单测时自动建立测试表</b> 都不会对该 Model 生
效。如果我们想让该 Modle 在 <b>单测时自动建立测试表</b> ，则可以手动将 managedb
变量置为 True。</p>
<h3 id="6-6"><span class="section-number">6.6</span>Multiple Databases</h3>
<p>要点：</p>
<ul><li>配置 DATABASES（在 settings.py 中）</li>
<li>配置 DATABASE_ROUTERS（在 settings.py 中）</li>
<li>实现 XxxRouter，并将路径配置在 DATABASE_ROUTERS 中</li>
</ul>
<h4 id="20150915"><span class="section-number">20150915</span>使用 Raw SQL 时，如何选择数据库 &#60;2015-09-15 二&#62;</h4>
<p>DB Router 只在使用 ORM 时生效，如果使用 Raw SQL，则需要通过 connections 来
选择 cursor。例如：</p>
<pre class="prettyprint"><code class="language-python">from django.db import connections
cursor = connections[&#39;minos_db&#39;].cursor()</code>
</pre>
<p>参考：</p>
<ul><li><a href="https://docs.djangoproject.com/en/1.8/topics/db/multi-db/#using-raw-cursors-with-multiple-databases">Using raw cursors with multiple databases (1.8)</a></li>
</ul>
<h3 id="6-7"><span class="section-number">6.7</span>null=True and blank=True</h3>
<p>总结：Django 的 ORM 用起来真是不省心，比 SQLAlchemy 差的有点远。使用 Django
有种类似大口吃翔的感觉。</p>
<h3 id="20160731_2141"><span class="section-number">20160731_2141</span>在Django应用之外使用Django Models &#60;2016-07-31 日 21:41&#62;</h3>
<p>有时候我们写的一些外部脚本想要访问Django管理的数据库，Django提供了方法来在
第三方脚本里初始化Django环境，使得外部脚本可以像Django应用一样访问Django
Models。代码如下：</p>
<pre class="prettyprint"><code class="language-py">import django
os.environ.setdefault(&#34;DJANGO_SETTINGS_MODULE&#34;, &#34;mysite.settings&#34;)
django.setup()
from cms.models import FileItem</code>
</pre>
<p>说明：</p>
<ol><li>一定要在 <code>django.setup()</code> 之后再 <code>import Django Models</code> 。</li>
<li>这是一个不得已的做法，一般情况推荐使用Django Management Commands将这些脚<p>本维护起来。</p>
</li>
</ol>
<h3 id="20170814_2056"><span class="section-number">20170814_2056</span>在Django中执行 Raw SQL &#60;2017-08-14 一 20:56&#62;</h3>
<pre class="prettyprint"><code class="language-py">sql = &#39; SELECT id, COUNT(id) as cnt FROM data_slice WHERE is_notify_%s = 1 AND is_%s_notified = 0&#39; \
      % (downstream, downstream)
logger.info(&#39;Execute sql: &#39; + sql)
result = DataSlice.objects.raw(sql)
downstream_status[&#39;unfinished_records_num&#39;] = 0
for row in result:
    downstream_status[&#39;unfinished_records_num&#39;] = row.cnt
downstream_status[&#39;unfinished_records_num&#39;] = -1</code>
</pre>
<p>要点：</p>
<ol><li>调用方法：XxxModel.objects.raw(sql)，返回一个RawQuerySet。</li>
<li>返回的RawQuerySet是一个支持iterate的对象（因为定义了 <code>__iter__</code> 方法。</li>
<li>如果Raw SQL返回结果为空，不会抛异常，只是iter迭代次数为零。</li>
</ol>
<h3 id="20170709_1331"><span class="section-number">20170709_1331</span>根据字段名判断Model存不存在某字段的定义 &#60;2017-07-09 日 13:31&#62;</h3>
<p>要点：</p>
<ol><li><code>getattr()</code> 和 <code>_meta.get_field()</code> 都可以用来判断字段定义是否存在。</li>
<li>不要使用Model的实例，而应该使用Model这个类本身来进行判断。使用实例的话，<p>无default值或者null=True的字段将会被漏掉。</p>
</li>
</ol>
<pre class="prettyprint"><code class="language-py">if not getattr(XxxModel, field_name, False):
    logger.error(&#39;Field not exist, name: %s&#39; % field_name)

field_type = XxxModel._meta.get_field(field_name).get_internal_type()</code>
</pre>
<h2 id="7"><span class="section-number">7</span>Django Route</h2>
<h3 id="20170331_1628"><span class="section-number">20170331_1628</span>通过reverse来在redirect时实现动态构造URL &#60;2017-03-31 五 16:28&#62;</h3>
<pre class="prettyprint"><code class="language-py">return redirect(reverse(xxx:bad_file&#39;, args=(xxx_bad_file_task.id,)))</code>
</pre>
<h2 id="8"><span class="section-number">8</span>Django Template</h2>
<h3 id="8-1"><span class="section-number">8.1</span>extends（继承）</h3>
<p>同 Jinja2</p>
<h3 id="20160720"><span class="section-number">20160720</span>在Django中使用Jinja2 &#60;2016-07-20 三&#62;</h3>
<p>自从某一版本开始，Jinja2成为了Django内置支持的一种可选模板，这个做法很好，因
为Django原生模板（DTL）有些奇怪的禁忌，比如说不能在模板里面调用函数，也不能
定义变量，导致用户不得不消耗更多的代码在其他地方实现相同的功能。</p>
<p>要在Django中使用Jinja2，要点如下：</p>
<ol><li>在settings.py中的TEMPLATES配置项添加类型为Jinja2的BACKEND，通过DIRS指定<p>Jinja2模板的路径，通过OPTIONS中的environment来设置Jinja2环境。</p>
</li>
<li>在OPTIONS的environment中设置的py文件中更新Jinja2的全局环境，将static和<p>url作为两个全局函数传入到Jinja2模板里面。</p>
</li>
<li>使用static和url时需要注意，Jinja2下的用法和Django不同，Jinja2下，这两个<p>是函数，需要以函数调用的方式来使用。</p>
</li>
<li>settings.py里的TEMPLATES配置项的Jinja2部分要放在Django之前，这样就可以同<p>时使用这两种模板。</p>
</li>
</ol>
<p>参考：</p>
<ol><li><a href="https://docs.djangoproject.com/ja/1.9/topics/templates/">Django Templates (V1.9)</a></li>
<li><a href="http://jonathanchu.is/posts/upgrading-jinja2-templates-django-18-with-admin/">Upgrading to Jinja2 Templates in Django 1.8 With Admin - jonathanchu.is</a></li>
</ol>
<h3 id="20160822_0408"><span class="section-number">20160822_0408</span>自定义filter和tag &#60;2016-08-22 一 04:08&#62;</h3>
<p>要点：</p>
<ol><li>将filter和tag的定义单独放到和views.py平行的目录templatetags里面，文件名<p>可以任取，例如叫xxx。</p>
</li>
<li>在使用到该filter和tag的模板里执行 {% load xxx %}。注意，不要认为在<p>base.html里面load一次就够了。</p>
</li>
<li>下面就是具体用法的事情了。</li>
</ol>
<p>参考：<a href="https://docs.djangoproject.com/en/1.10/howto/custom-template-tags/">Custom template tags and filters | Django documentation | Django</a></p>
<h3 id="20161203_1455"><span class="section-number">20161203_1455</span>自定义filter时，使输出的HTML不被转义 &#60;2016-12-03 六 14:55&#62;</h3>
<p>要点：return返回HTML时，使用 <code>make_safe</code> 。如下：</p>
<pre class="prettyprint"><code class="language-py"># -*- coding: utf-8 -*-

from django import template
from django.shortcuts import render_to_response
from django.utils.safestring import mark_safe

register = template.Library()


@register.filter()
def form_field(value):
    return mark_safe(render_to_response(&#39;_partials/form_field.html&#39;, {
        &#39;field&#39;: value
    }).content)</code>
</pre>
<h2 id="9"><span class="section-number">9</span>Django Forms</h2>
<ul><li><a href="https://docs.djangoproject.com/en/1.8/topics/forms/modelforms/">Creating forms from models</a> (1.8)</li>
</ul>
<h3 id="20160814_2222"><span class="section-number">20160814_2222</span>Django Forms应用经验 &#60;2016-08-14 日 22:22&#62;</h3>
<ol><li>在模板中通过 {{ form.xxx }} 可以直接渲染出表单字段的HTML（不带Label）。</li>
<li>通过 {{ form.xxx.label }} 可以取到表单字段的标签，如果是ModelForm，那么<p>就取Model字段的 <code>verbose_name</code> 属性，如果没设置它，则取Model字段名的首字
母大写形式。</p>
</li>
<li>只有在执行is_valid()之后，才能访问form的cleaned_data。</li>
</ol>
<h3 id="20160816_2023"><span class="section-number">20160816_2023</span>如何在一次请求提交多个表单？ &#60;2016-08-16 二 20:23&#62;</h3>
<p>要点：</p>
<ol><li>在view里面通过prefix定义不同的表单。</li>
<li>在模板里面将不同的表单的字段写到同一个&#60;form&#62;标签内。</li>
<li>在view里面通过多次使用request.POST以及不同的prefix（起过滤作用）来构造不<p>同的表单。</p>
</li>
</ol>
<pre class="prettyprint"><code class="language-py">def order_book(request):
    if request.method == &#39;POST&#39;:
        add_book_form = AddBookForm(request.POST, prefix=&#39;add_book&#39;)
        order_book_form = OrderBookForm(request.POST, prefix=&#39;order_book&#39;)
        if add_book_form.is_valid() and order_book_form.is_valid():
            book = Book.objects.filter(isbn=add_book_form.cleaned_data[&#39;isbn&#39;]).first()
            if book is None:
                book = add_book_form.save()
                messages.info(request, &#39;Success to add book: %s&#39; % book.isbn)
            book_order = order_book_form.save()
            messages.info(request, &#39;Success to order book: %s&#39; % book_order.location)
            return redirect(&#39;/book/my_books&#39;)
    else:
        add_book_form = AddBookForm(prefix=&#39;add_book&#39;)
        order_book_form = OrderBookForm(prefix=&#39;order_book&#39;)
    return render(request, &#39;book/order.html&#39;, {
        &#39;add_book_form&#39;: add_book_form,
        &#39;order_book_form&#39;: order_book_form,
    })</code>
</pre>
<p>参考：</p>
<ol><li><a href="https://docs.djangoproject.com/ja/1.10/topics/forms/formsets/">Formsets | Django documentation | Django</a></li>
</ol>
<h3 id="20160816_2228"><span class="section-number">20160816_2228</span>处理ModelForm中的Foreign Key字段 &#60;2016-08-16 二 22:28&#62;</h3>
<p>要点：</p>
<ol><li>ModelForm会自动将Foreign Key字段转化为&#60;select&#62;。</li>
<li>在ModelForm的init函数中填充&#60;select&#62;的options。</li>
</ol>
<p>下面的例子中，book和location都是Foreign Key。</p>
<pre class="prettyprint"><code class="language-py">class BookOrder(models.Model):
    username = models.CharField(max_length=255, default=&#39;&#39;)
    book = models.ForeignKey(&#39;Book&#39;)
    order_batch = models.ForeignKey(&#39;OrderBatch&#39;)
    order_time = models.DateTimeField(default=datetime.now(), blank=True)
    location = models.ForeignKey(&#39;Location&#39;)
    status = models.CharField(max_length=255, default=&#39;unfinished&#39;)

    def __str__(self):
        return (u&#39;%s - %s&#39; % (self.username, self.book.title)).encode(&#39;utf-8&#39;)


class OrderBookForm(ModelForm):
    class Meta:
        model = BookOrder
        fields = [&#39;username&#39;, &#39;book&#39;, &#39;order_batch&#39;, &#39;order_time&#39;, &#39;location&#39;]

        widgets = {
            &#39;location&#39;: widgets.Select(attrs={&#39;class&#39;: &#39;form-control&#39;}),
            &#39;order_batch&#39;: widgets.Select(attrs={&#39;class&#39;: &#39;form-control&#39;}),
        }</code>
</pre>
<h3 id="20160817_1839"><span class="section-number">20160817_1839</span>提交表单后，在views中检验表单前，修改表单字段值 &#60;2016-08-17 三 18:39&#62;</h3>
<p>这块折腾了许久，终于搞定了，记一下要点：</p>
<ol><li>request.POST是一个immutable的QueryDict，通过它生成的表单是无法被修改，需<p>要通过 <code>request.POST = request.POST.copy()</code> 来将其改为 mutable 的，进而
生成可被修改的表单。</p>
</li>
<li>form有cleaned_data和data两个属性，前者只有在调用form.is_valid()后才能被访<p>问。</p>
</li>
<li>form可以通过initial设定的初始值，但这只能用来设定初始值，而不能通过它来<p>修改已提交的form的字段值。</p>
</li>
<li>结论：在调用form.is_valid()之前通过form.data[&#39;xxx&#39;]来修改字段值。</li>
<li>补充：如果构造表单时设置了prefix，那么通过form.data[&#39;xxx&#39;]取字段时，字段<p>名需要同步地加上前缀。
</p>
</li>
</ol>
<pre class="prettyprint"><code class="language-py">  ...
  order_book_form.data[&#39;order_book-book&#39;] = book.id
  if order_book_form.is_valid():
      book_order = order_book_form.save()
      messages.info(request, &#39;Success to order book: %s&#39; % book_order.location)
      return redirect(&#39;/book/my_books&#39;)
  ...</code>
</pre>
<p>感想：Django的form是很便利的，但是Django的学习成本确实很高。</p>
<h3 id="20160818_2339"><span class="section-number">20160818_2339</span>如何非form中发起POST请求时关闭csrf保护以解决403错误？ &#60;2016-08-18 四 23:39&#62;</h3>
<p>在form中，可以加上 <code>{% csrf_token %}</code> 来实现跨站请求伪造保护，默认情况下，
Django后端是要求全部的POST情况都带上csrf_token的。但是有时候，我们并不是在表
单中发起POST情况，csrf_token就不方便加上，我们可以关闭csrf。关闭csrf很简单，
就是在settings.py中去掉 <code>django.middleware.csrf.CsrfViewMiddleware</code> 即可，
但是这样的话，会导致全部请求的csrf被关闭，这会带来一定的风险。我们可以只针
对特定的views关闭csrf，方法就是使用修饰器 <code>@csrf_exempt</code> 。具体如下：</p>
<pre class="prettyprint"><code class="language-py">from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def notification(request):
    event = request.POST[&#39;event&#39;]
    if event in [&#39;arrival&#39;, &#39;shortage&#39;]:
        order_id = request.POST[&#39;id&#39;]
        book_order = get_object_or_404(BookOrder, pk=order_id)
        book_order.status = event
        book_order.save()
        return JsonResponse({&#39;order_status&#39;: book_order.status})
    return HttpResponse(event)</code>
</pre>
<p>参考：</p>
<ol><li><a href="http://stackoverflow.com/questions/6800894/django-returns-403-error-when-sending-a-post-request">python - Django returns 403 error when sending a POST request - Stack Overflow</a></li>
<li><a href="https://docs.djangoproject.com/en/1.10/ref/csrf/">Cross Site Request Forgery protection | Django documentation | Django</a></li>
</ol>
<h2 id="10"><span class="section-number">10</span>Django Logging</h2>
<ul><li><a href="https://docs.djangoproject.com/en/1.7/topics/logging/"><a href="https://docs.djangoproject.com/en/1.7/topics/logging/">https://docs.djangoproject.com/en/1.7/topics/logging/</a></a></li>
</ul>
<h3 id="20150331"><span class="section-number">20150331</span>Django 使用 Python 内建的 logging 模块 &#60;2015-03-31 二&#62;</h3>
<p>Django 使用 Python 内建的 logging 模块来做日志打印。Python 的 logging 模块
的配置分为四个部分：</p>
<ul><li>Loggers</li>
<li>Handlers</li>
<li>Filters</li>
<li>Formaters</li>
</ul>
<hr/>
<p><b>Logger</b> 是 Python logging system 的入口。用户通过 logger 进行打日志，每条
日志（logger record）都具有 log level。Log level 有如下几种：</p>
<table><tbody><tr><th><p>日志等级  </p>
</th>
<th><p>描述                                                         </p>
</th>
</tr>
<tr><td><p>DEBUG:    </p>
</td>
<td><p>Low level system information for debugging purposes          </p>
</td>
</tr>
<tr><td><p>INFO:     </p>
</td>
<td><p>General system information                                   </p>
</td>
</tr>
<tr><td><p>WARNING:  </p>
</td>
<td><p>Information describing a minor problem that has occurred.    </p>
</td>
</tr>
<tr><td><p>ERROR:    </p>
</td>
<td><p>Information describing a major problem that has occurred.    </p>
</td>
</tr>
<tr><td><p>CRITICAL: </p>
</td>
<td><p>Information describing a critical problem that has occurred. </p>
</td>
</tr>
</tbody>
</table>
<p><b>Handlers</b> 是决定对 logger 中每条 message 做和处理的引擎。Handlers 也拥有
log level，如果某个 log record 的 log level 大于等于该值，则忽略这个 log
record。一个 logger 可拥有多个 handlers，而每个 handler 都有其自己的 log level。</p>
<p><b>Filters</b> 提供了额外的手段，来控制那些 log records 会被从 logger 传递到
handler，它既可以被安装到 logger 上，也可以安装到 handler 上。</p>
<p><b>Formatters</b> 能够控制 log record 打印成文本的格式。参考：<a href="https://docs.python.org/3/library/logging.html#logrecord-attributes">LogRecord attributes</a></p>
<h3 id="10-2"><span class="section-number">10.2</span>使用 Python logging</h3>
<p>发生异常后，可以使用 logger.exeception() 来打日志，因为它可以同时记录发生异
常时的函数调用栈。</p>
<pre class="prettyprint"><code class="language-sh">logger.exception(): Creates an ERROR level logging message wrapping the current exception stack frame.</code>
</pre>
<h2 id="11"><span class="section-number">11</span>Django Management Commands</h2>
<p>我们使用 Django 来做 Web 开发，但是总有一些定期或者非定期的后台任务需要运行，
这时我希望 Django 能够提供相关的设施，来让我方便实现并执行这些后台任务。我的需求有
下面几点：</p>
<ol><li>能让我的任务脚本很方便地获得 Django 的运行环境（主要是数据库）</li>
<li>提供一个优雅的接口，来让我方便管理这些任务。当我的任务越来越多，且要交接<p>给别人时，这一点显得更为重要
</p>
</li>
</ol>
<p>PHP 有个 Web 框架叫 YII，在百度使用广泛。它的 yiic 脚本可以注册命令，然后通
过 ./yiic xxx 来运行相应的脚本。这样带来的好处就是接口统一，可维护性好。</p>
<p>Django 框架也提供了 Management Command 功能，它能让我们写自己的后台脚本，并
注册到 manage.py 上，只需要通过 python manage.py xxx 就可以执行它，并且带着
Django 的运行环境。</p>
<ul><li><a href="https://docs.djangoproject.com/en/1.7/howto/custom-management-commands/">Writing custom django-admin commands</a><p></p>
</li>
</ul>
<p>该功能的目录格式和必须的文件如下：</p>
<pre class="prettyprint"><code class="language-sh">[zy@xxx.com]$ tree -A  minos/management/
minos/management/
├── commands
│   ├── data_quality.py
│   ├── __init__.py
├── __init__.py</code>
</pre>
<p>文件 <code>minos/management/commands/data_quality.py</code> 内容如下：</p>
<pre class="prettyprint"><code class="language-python">from django.core.management.base import BaseCommand, CommandError


class Command(BaseCommand):
    help = &#39;Minos data quality&#39;

    def handle(self, *args, **options):
        print self.help</code>
</pre>
<p>当我执行 <code>python manage.py data_quality</code> 后，即可得到返回：</p>
<pre class="prettyprint"><code class="language-sh">Minos data quality</code>
</pre>
<h2 id="12"><span class="section-number">12</span>Django Admin</h2>
<h3 id="12-1"><span class="section-number">12.1</span>自定义 Action</h3>
<ul><li><a href="https://docs.djangoproject.com/en/1.8/ref/contrib/admin/actions/">Admin actions (1.8)</a></li>
<li><a href="http://agiliq.com/blog/2014/08/passing-parameters-to-django-admin-action/">Passing parameters to Django admin action</a>  <p></p>
</li>
</ul>
<p>自定义 Action，配合 Filter 来在 Admin 页面上对数据进行批量操作。</p>
<h3 id="12-2"><span class="section-number">12.2</span>自定义 Admin 页面的外观</h3>
<ul><li><a href="https://docs.djangoproject.com/en/1.8/intro/tutorial02/#customize-the-admin-look-and-feel">Customize the admin look and feel (Django 1.8 Tutorial)</a></li>
<li><a href="http://stackoverflow.com/questions/6583877/how-to-override-and-extend-basic-django-admin-templates">How to override and extend basic Django admin templates?</a>（看起来过期了，只能供参考）]]</li>
<li><a href="http://heyman.info/2011/jul/5/extending-templates-specific-django-app/">Extending templates from a specific Django app</a>（看起来过期了，只能供参考）</li>
</ul>
<p>官方文档介绍的方法很 hack，是拷贝 Admin 页面的默认模板到自己的
templates/admin 目录下，并直接在上面修改来完成的，而不是通过 Django 模板系
统的 extends 机制。估计是 Django 的模板系统也无法处理不同模板路径下的模板文
件寻找的问题吧。</p>
<h2 id="13"><span class="section-number">13</span>Django Unittest</h2>
<p>Django 的单测其实是完全基于 Python 的 unittest 模块，只要了解后者，Django
的单测其实是没有学习成本的。</p>
<p>Django 的 django.test.TestCase 扩充了 unittest 模块，增加了许多特有的
assert 方法，例如：</p>
<pre class="prettyprint"><code class="language-python">assertHTMLEqual()
assertFormError()
assertContains() # 检查 response 的状态码</code>
</pre>
<p>执行单测的命令是：</p>
<pre class="prettyprint"><code class="language-sh">python manage.py test minos</code>
</pre>
<p>参考：</p>
<ul><li><a href="https://docs.python.org/2/library/unittest.html">25.3. unittest — Unit testing framework</a></li>
<li><a href="https://docs.djangoproject.com/en/1.8/intro/tutorial05/">Writing your first Django app, part 5 (Django 1.8)</a></li>
<li><a href="https://docs.djangoproject.com/en/1.8/topics/testing/overview/">Writing and running tests (Django 1.8)</a></li>
</ul>
<h2 id="14"><span class="section-number">14</span>邮件和短信</h2>
<p>Django 支持 SMTP 协议来发送邮件，不过我不喜欢，我想使用 <code>sendmail</code> 这个
Linux 指令来发送。我搜到了一个解法：</p>
<ul><li><a href="https://djangosnippets.org/snippets/1864/">email backend which use sendmail subprocess</a></li>
</ul>
<h2 id="15"><span class="section-number">15</span>Middleware</h2>
<h3 id="20150614"><span class="section-number">20150614</span>将异常调用栈打印出来（通过 Middleware） &#60;2015-06-14 日&#62;</h3>
<p>用户请求过来，如果处理请求时抛出了异常，Django 日志里只能简单地打印一条 500
（或其他错误码）的日志，无法看到异常的调用栈。这对我们 Debug 是非常不利的。</p>
<p>为了能在异常时打印调用栈，我们需要 Django 提供一种类似于 Flask 的
<code>before_app_request</code> 这样的自定义钩子函数，在每次访问前或访问后， <b>对异常进
行统一的处理</b> 。</p>
<p>Django 提供了被称为 Middleware 的机制，引用 <a href="https://docs.djangoproject.com/en/dev/topics/http/middleware/#process_exception">Django 文档</a> ，Middleware 是：</p>
<blockquote><p>Middleware is a framework of hooks into Django’s request/response
processing. It’s a light, low-level “plugin” system for globally
altering Django’s input or output.</p>
</blockquote>
<p>我们可以自定义自己的 Middleware 来在每次处理请求的异常时做我们想要的处理，
例如打印调用栈。为了实现这个自定义，我们需要做：</p>
<ol><li>定义 Middleware 类，在类中实现 <code>process_exception()</code> 函数。</li>
<li>修改 setting.py 中的 MIDDLEWARE_CLASSES，在里面引入此类。</li>
</ol>
<p>具体实现的例子是：我们在项目目录下新建一个叫做 middleware.py 的文件，并在里
面加入：</p>
<pre class="prettyprint"><code class="language-python">import traceback
import sys

class ProcessExceptionMiddleware(object):
    def process_response(self, request, response):
        if response.status_code != 200:
            print &#39;\n&#39;.join(traceback.format_exception(*sys.exc_info()))
        return response</code>
</pre>
<p>然后在 setting.py 的 MIDDLEWARE_CLASSES 里加入：</p>
<pre class="prettyprint"><code class="language-python">MIDDLEWARE_CLASSES = (
    &#39;django.contrib.sessions.middleware.SessionMiddleware&#39;,
    # 省略其他 Middleware
    &#39;minosweb.middleware.ProcessExceptionMiddleware&#39;
)</code>
</pre>
<p>参考：</p>
<ul><li><a href="http://stackoverflow.com/questions/5137042/how-can-i-get-django-to-print-the-debug-information-to-the-console">http://stackoverflow.com/questions/5137042/how-can-i-get-django-to-print-the-debug-information-to-the-console</a></li>
<li><a href="https://docs.djangoproject.com/en/1.8/topics/http/middleware/#process-exception">Middleware (Django 1.8)</a></li>
</ul>
<h2 id="16"><span class="section-number">16</span>问题记录</h2>
<h3 id="16-1"><span class="section-number">16.1</span>css 文件有时候需要重启 server 才能生效</h3>
<p>例如：bootstrap.min.css</p>
<h3 id="16-2" class="task-status todo"><span class="section-number">16.2</span><span class="task-status todo">TODO</span>线上部署时是 static 文件寻址</h3>
<p>解法：临时先把 static 目录一股脑拷贝到/var/www 目录下。</p>
<h3 id="16-3"><span class="section-number">16.3</span>WSGIPythonPath cannot occur within &#60;VirtualHost&#62; section</h3>
<p>解法：换用 WSGIDaemonProcess 来设置 python-path</p>
<h3 id="16-4"><span class="section-number">16.4</span>OperationalError: unable to open database file</h3>
<p>Django 在读写 sqlite 时会在 project 目录下产生临时文件，所以不仅要对 db.sqlite3 执行 chmod 777，还要对整个 project 目录执行 chmod 777 -R。</p>
<h3 id="16-5"><span class="section-number">16.5</span>TypeError: can&#39;t compare offset-naive and offset-aware datetimes</h3>
<p>Django 支持 Python datetime 里面的时区特性。这样就导致了一个问题，开启时区
特性后：</p>
<ol><li>Django 框架生成的 datetime 是 <code>offset-aware</code> 的。</li>
<li>通过 datetime 模块生成的 datetime 是 <code>offset-naive</code> 的。</li>
</ol>
<p>两种方式产生的 datetime 变量一比较，就会抛出 <code>TypeError: can&#39;t compare
offset-naive and offset-aware datetimes</code> 这样的异常，让用户感觉很坑。</p>
<p>解法：将 settings.py 里的 <code>USE_TZ</code> 设为 False。参考：</p>
<ul><li><a href="https://docs.djangoproject.com/en/1.8/topics/i18n/timezones/">Time zones (Django 1.8)</a></li>
</ul>
<h3 id="16-6"><span class="section-number">16.6</span>Unsafe statement written to the binary log using statement format since BINLOG_FORMAT = STATEMENT</h3>
<p>我使用 Django 的 raw SQL 来执行 update，但是抛出了下面的异常：</p>
<pre class="prettyprint"><code class="language-sh">Warning: Unsafe statement written to the binary log using statement format since BINLOG_FORMAT = STATEMENT. Statements writing to a table with an auto-increme
nt column after selecting from another table are unsafe because the order in which rows are retrieved determines what (if any) rows will be written. This orde
r cannot be predicted and may differ on master and the slave.</code>
</pre>
<p>Google 一下，发现有人和我遇到了 <a href="http://stackoverflow.com/questions/17057593/warning-unsafe-statement-written-to-the-binary-log-using-statement-format-since">同样的问题</a> ，他们的解法是修改 mysqld 的配置
将 binlog_format 改为 mixed 并重启。我修改了一下我的 <code>my.conf</code> ，发现确实解
决了问题：</p>
<pre class="prettyprint"><code class="language-sh"># binary logging format - mixed recommended                                                         
binlog_format=mixed     </code>
</pre>
<p>补充一句，我是在测试环境下的 MySQL 出现的这个问题，线上环境（公司 DBA 维护）
的并没有，说明将 binlog format 设为 mixed（而不是 statement）应该是推荐的配
置。</p>
<ul><li><a href="http://dev.mysql.com/doc/refman/5.1/en/binary-log-setting.html">Setting The Binary Log Format (MySQL 5.1 Reference Manual)</a></li>
</ul>
<h3 id="16-7"><span class="section-number">16.7</span>通过 Admin 页面新增对象时，抛出 Error creating new content types. Please make sure contenttypes is migrated before trying to migrate apps individually.</h3>
<p>原因：建表时，没有卫生地通过 Django 的 Migration 机制来迁移，
django_content_type 表中不含有该表的记录。</p>
<p>解决方法（假设我们的表明叫做 data_flow）：</p>
<pre class="prettyprint"><code class="language-sql">insert into django_content_type (name, app_label, model) value (&#39;data flow&#39;, &#39;management&#39;, &#39;dataflow&#39;);</code>
</pre>
<h3 id="16-8"><span class="section-number">16.8</span>当 DEBUG = False 时找不到 static 文件，除非 python manage.py runserver --insecure </h3>
<p>Django 还是很挫的，并不站在用户角度设计。使用 Flask 让人惬意，使用 Django
经常给你来个惊异，然后耗费掉你大量时间。</p>
<h3 id="16-9"><span class="section-number">16.9</span>ADMINS 的值是个 tuple 的 tuple，后面有个逗号</h3>
<pre class="prettyprint"><code class="language-python"># 错误！
ADMINS = ((&#39;Zhong Yi&#39;, &#39;zhongyi@xxx.com&#39;))     
# 正确
ADMINS = ((&#39;Zhong Yi&#39;, &#39;zhongyi@xxx.com&#39;),)     </code>
</pre>
<p>使用 Django 经常给你来个惊异，然后耗费掉你大量时间。</p>
<h3 id="20160817_0249"><span class="section-number">20160817_0249</span>[Errno socket error] [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590) &#60;2016-08-17 三 02:49&#62;</h3>
<p>我使用Django cas实现单点登录时，将cas server指向公司的测试服务器地址，结果
报了上面的错误。网上搜了一下，别人说这是Mac下的OpenSSL升级导致产生了不兼容
的问题。我通过brew重装了OpenSSL，发现搞不定。</p>
<p>最后，我在 <a href="https://github.com/servo/servo/issues/5917">https://github.com/servo/servo/issues/5917</a> 一文中找到了几行代码，
粘贴到views.py的开始处，发现问题解决了。</p>
<pre class="prettyprint"><code class="language-py">import ssl
ssl._create_default_https_context = ssl._create_unverified_context</code>
</pre>
<h3 id="20160821_1933"><span class="section-number">20160821_1933</span>首次线上部署时，执行 python manage.py makemigrations 没有如预期地生成迁移指令 &#60;2016-08-21 日 19:33&#62;</h3>
<p>原因：开发环境下，我们通过startapp来新增应用，这个指令会生成一个migrations
目录，这个步骤是迁移初始化。没有这个步骤，执行 <code>python manage.py
makemigrations</code> 是不会发现models的diff并生成数据库迁移指令的。 </p>
<p>当我们将应用部署到线上是，则不会执行startapp，而是直接从代码库拉取代码，而
且线上环境和开发环境的migrations目录不会共用。这就导致了首次线上部署是没有
经过迁移初始化的步骤，进而导致标题上提到的这个问题。</p>
<p>解决方法很简单，以应用标签为参数再执行一篇。例如：</p>
<pre class="prettyprint"><code class="language-sh">python manage.py makemigrations book</code>
</pre>
<p>参考：</p>
<ol><li><a href="http://stackoverflow.com/questions/23068275/migrations-in-django-1-7">Migrations in Django 1.7 - Stack Overflow</a></li>
<li><a href="https://docs.djangoproject.com/en/1.10/topics/migrations/#adding-migrations-to-apps">Migrations | Django documentation | Django</a></li>
</ol>
<h3 id="20161125_0926"><span class="section-number">20161125_0926</span>django.core.exceptions.AppRegistryNotReady: Apps aren&#39;t loaded yet. &#60;2016-11-25 五 09:26&#62;</h3>
<p>现象：在一个app的views.py中引入Model，报这个错误，但是在其他app中引入，则不
会报。</p>
<pre class="prettyprint"><code class="language-sh">Traceback (most recent call last):
  File &#34;/home/work/.jumbo/lib/python2.7/site-packages/django/utils/autoreload.py&#34;, line 226, in wrapper
    fn(*args, **kwargs)
  File &#34;/home/work/.jumbo/lib/python2.7/site-packages/django/core/management/commands/runserver.py&#34;, line 113, in inner_run
    autoreload.raise_last_exception()
  File &#34;/home/work/.jumbo/lib/python2.7/site-packages/django/utils/autoreload.py&#34;, line 249, in raise_last_exception
    six.reraise(*_exception)
  File &#34;/home/work/.jumbo/lib/python2.7/site-packages/django/utils/autoreload.py&#34;, line 226, in wrapper
    fn(*args, **kwargs)
  File &#34;/home/work/.jumbo/lib/python2.7/site-packages/django/__init__.py&#34;, line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File &#34;/home/work/.jumbo/lib/python2.7/site-packages/django/apps/registry.py&#34;, line 85, in populate
    app_config = AppConfig.create(entry)
  File &#34;/home/work/.jumbo/lib/python2.7/site-packages/django/apps/config.py&#34;, line 90, in create
    module = import_module(entry)
  File &#34;/home/work/.jumbo/lib/python2.7/importlib/__init__.py&#34;, line 37, in import_module
    __import__(name)
  File &#34;/home/work/minos/nimos/minos/__init__.py&#34;, line 3, in &#60;module&#62;
    from . import views
  File &#34;/home/work/minos/nimos/minos/views.py&#34;, line 16, in &#60;module&#62;
    from minos.models import LogConfig
  File &#34;/home/work/minos/nimos/minos/models.py&#34;, line 8, in &#60;module&#62;
    class LogConfig(models.Model):
  File &#34;/home/work/.jumbo/lib/python2.7/site-packages/django/db/models/base.py&#34;, line 105, in __new__
    app_config = apps.get_containing_app_config(module)
  File &#34;/home/work/.jumbo/lib/python2.7/site-packages/django/apps/registry.py&#34;, line 237, in get_containing_app_config
    self.check_apps_ready()
  File &#34;/home/work/.jumbo/lib/python2.7/site-packages/django/apps/registry.py&#34;, line 124, in check_apps_ready
    raise AppRegistryNotReady(&#34;Apps aren&#39;t loaded yet.&#34;)
django.core.exceptions.AppRegistryNotReady: Apps aren&#39;t loaded yet.</code>
</pre>
<p>检查一遍，发现该app的 <code>__init__.py</code> 中有奇怪的代码，而其他app中则没有。</p>
<pre class="prettyprint"><code class="language-py">from django.conf.urls import url

from . import views

app_name = &#39;xxxxx&#39;
urlpatterns = [
    url(r&#39;^/$&#39;, views.index, name=&#39;index&#39;),
]</code>
</pre>
<p>这些代码本来应该出现在 <code>urls.py</code> 中的。我删除这些代码，再观察，发现问题解决。</p>
<p>原因总结：这个app下的 <code>__init__.py</code> 是在Django app注册之前加载的，在里面引
入了views.py会导致这种问题。</p>
<h2 id="17"><span class="section-number">17</span>回顾</h2>
<h3 id="20140301"><span class="section-number">20140301</span>看完了官方 Tutorial &#60;2014-03-01 六&#62;</h3>
<p>Django 的官方 Tutorial 写得确实很赞，我照着它很流畅地学完了 Django。下一步我会寻求
Django 与 Bootstrap 的集成。</p>
<h3 id="20150327"><span class="section-number">20150327</span>再度使用 Django &#60;2015-03-27 五&#62;</h3>
<p>存在问题：</p>
<ol><li>Python 语法文件</li>
<li>缺乏 Web 开发的 snippets</li>
<li>Admin 页面加 Modle 过程繁琐。为了将一个 Model 添加到 Admin 页面，我需要在 N 个地方加代码，我感觉很不爽。</li>
<li>设定模板加载路径</li>
</ol>
<p>相关工具:</p>
<ol><li>vim-surround 解决 HTML 标签的修改问题</li>
<li>Django 项目管理插件在哪里？</li>
</ol>
<h3 id="20150619"><span class="section-number">20150619</span>Django 还是很挫的 &#60;2015-06-19 五&#62;</h3>
<p>Django 还是很挫的，并不站在用户角度设计。使用 Flask 让人惬意，而使用 Django
则会经常给你来个惊异，然后耗费掉你大量时间。</p>
<p>今天实现 EmailBackend 和程序异常时自动发邮件时，连续踩到了多个坑。包括：</p>
<ol><li>DEBUG 从 True 设置为 False 时，static 文件突然不声不响地不能访问了。</li>
<li>ADMINS 这个 tuple 中的 tuple 需要在后面补上一个逗号。</li>
<li>Django 拥有大量组织良好制作精美且全面的文档，然而卵用并不大。<p></p>
</li>
</ol>
</div></div><div class="col-md-3" data-reactid="41"><div id="toc" data-reactid="42"><ul class="nav nav-toc"><li><a href="#1"><span class="section-number">1</span>前言</a></li>
<li><a href="#2"><span class="section-number">2</span>资料收集</a><ul class="nav nav-toc"><li><a href="#2-1"><span class="section-number">2.1</span>文档</a></li>
<li><a href="#2-2"><span class="section-number">2.2</span>文章</a></li>
<li><a href="#2-3"><span class="section-number">2.3</span>项目</a></li>
</ul>
</li>
<li><a href="#3"><span class="section-number">3</span>安装和部署</a><ul class="nav nav-toc"><li><a href="#3-1"><span class="section-number">3.1</span>安装 Django</a></li>
<li><a href="#3-2"><span class="section-number">3.2</span>部署 Django 应用</a></li>
</ul>
</li>
<li><a href="#4"><span class="section-number">4</span>阅读 Djaogo 文档</a><ul class="nav nav-toc"><li><a href="#4-1"><span class="section-number">4.1</span>Part 1: Start a project and ORM</a></li>
<li><a href="#4-2"><span class="section-number">4.2</span>Part 2: Admin interface</a></li>
<li><a href="#4-3"><span class="section-number">4.3</span>Part 3: Views and template system</a></li>
<li><a href="#4-4"><span class="section-number">4.4</span>Part 4: Action in view and generic views</a></li>
<li><a href="#4-5"><span class="section-number">4.5</span>TODO Part 5: Testing</a></li>
<li><a href="#4-6"><span class="section-number">4.6</span>Part 6</a></li>
</ul>
</li>
<li><a href="#5"><span class="section-number">5</span>Django 第三方</a><ul class="nav nav-toc"><li><a href="#5-1"><span class="section-number">5.1</span>Django REST framework </a></li>
<li><a href="#5-2"><span class="section-number">5.2</span>Django import/export</a></li>
<li><a href="#20150805"><span class="section-number">20150805</span>使用 Django cas 实现单点登录 &#60;2015-08-05 三&#62;</a></li>
</ul>
</li>
<li><a href="#6"><span class="section-number">6</span>Django Models</a><ul class="nav nav-toc"><li><a href="#6-1"><span class="section-number">6.1</span>字段</a></li>
<li><a href="#6-2"><span class="section-number">6.2</span>Relationships</a></li>
<li><a href="#6-3"><span class="section-number">6.3</span>Django Model 的查询语法</a></li>
<li><a href="#6-4"><span class="section-number">6.4</span>Aggregation, values and annotations</a></li>
<li><a href="#6-5"><span class="section-number">6.5</span>Legacy Database（非 Django ORM 生成和管理的数据库）</a></li>
<li><a href="#6-6"><span class="section-number">6.6</span>Multiple Databases</a></li>
<li><a href="#6-7"><span class="section-number">6.7</span>null=True and blank=True</a></li>
<li><a href="#20160731_2141"><span class="section-number">20160731_2141</span>在Django应用之外使用Django Models &#60;2016-07-31 日 21:41&#62;</a></li>
<li><a href="#20170814_2056"><span class="section-number">20170814_2056</span>在Django中执行 Raw SQL &#60;2017-08-14 一 20:56&#62;</a></li>
<li><a href="#20170709_1331"><span class="section-number">20170709_1331</span>根据字段名判断Model存不存在某字段的定义 &#60;2017-07-09 日 13:31&#62;</a></li>
</ul>
</li>
<li><a href="#7"><span class="section-number">7</span>Django Route</a><ul class="nav nav-toc"><li><a href="#20170331_1628"><span class="section-number">20170331_1628</span>通过reverse来在redirect时实现动态构造URL &#60;2017-03-31 五 16:28&#62;</a></li>
</ul>
</li>
<li><a href="#8"><span class="section-number">8</span>Django Template</a><ul class="nav nav-toc"><li><a href="#8-1"><span class="section-number">8.1</span>extends（继承）</a></li>
<li><a href="#20160720"><span class="section-number">20160720</span>在Django中使用Jinja2 &#60;2016-07-20 三&#62;</a></li>
<li><a href="#20160822_0408"><span class="section-number">20160822_0408</span>自定义filter和tag &#60;2016-08-22 一 04:08&#62;</a></li>
<li><a href="#20161203_1455"><span class="section-number">20161203_1455</span>自定义filter时，使输出的HTML不被转义 &#60;2016-12-03 六 14:55&#62;</a></li>
</ul>
</li>
<li><a href="#9"><span class="section-number">9</span>Django Forms</a><ul class="nav nav-toc"><li><a href="#20160814_2222"><span class="section-number">20160814_2222</span>Django Forms应用经验 &#60;2016-08-14 日 22:22&#62;</a></li>
<li><a href="#20160816_2023"><span class="section-number">20160816_2023</span>如何在一次请求提交多个表单？ &#60;2016-08-16 二 20:23&#62;</a></li>
<li><a href="#20160816_2228"><span class="section-number">20160816_2228</span>处理ModelForm中的Foreign Key字段 &#60;2016-08-16 二 22:28&#62;</a></li>
<li><a href="#20160817_1839"><span class="section-number">20160817_1839</span>提交表单后，在views中检验表单前，修改表单字段值 &#60;2016-08-17 三 18:39&#62;</a></li>
<li><a href="#20160818_2339"><span class="section-number">20160818_2339</span>如何非form中发起POST请求时关闭csrf保护以解决403错误？ &#60;2016-08-18 四 23:39&#62;</a></li>
</ul>
</li>
<li><a href="#10"><span class="section-number">10</span>Django Logging</a><ul class="nav nav-toc"><li><a href="#20150331"><span class="section-number">20150331</span>Django 使用 Python 内建的 logging 模块 &#60;2015-03-31 二&#62;</a></li>
<li><a href="#10-2"><span class="section-number">10.2</span>使用 Python logging</a></li>
</ul>
</li>
<li><a href="#11"><span class="section-number">11</span>Django Management Commands</a></li>
<li><a href="#12"><span class="section-number">12</span>Django Admin</a><ul class="nav nav-toc"><li><a href="#12-1"><span class="section-number">12.1</span>自定义 Action</a></li>
<li><a href="#12-2"><span class="section-number">12.2</span>自定义 Admin 页面的外观</a></li>
</ul>
</li>
<li><a href="#13"><span class="section-number">13</span>Django Unittest</a></li>
<li><a href="#14"><span class="section-number">14</span>邮件和短信</a></li>
<li><a href="#15"><span class="section-number">15</span>Middleware</a><ul class="nav nav-toc"><li><a href="#20150614"><span class="section-number">20150614</span>将异常调用栈打印出来（通过 Middleware） &#60;2015-06-14 日&#62;</a></li>
</ul>
</li>
<li><a href="#16"><span class="section-number">16</span>问题记录</a><ul class="nav nav-toc"><li><a href="#16-1"><span class="section-number">16.1</span>css 文件有时候需要重启 server 才能生效</a></li>
<li><a href="#16-2"><span class="section-number">16.2</span>TODO 线上部署时是 static 文件寻址</a></li>
<li><a href="#16-3"><span class="section-number">16.3</span>WSGIPythonPath cannot occur within &#60;VirtualHost&#62; section</a></li>
<li><a href="#16-4"><span class="section-number">16.4</span>OperationalError: unable to open database file</a></li>
<li><a href="#16-5"><span class="section-number">16.5</span>TypeError: can&#39;t compare offset-naive and offset-aware datetimes</a></li>
<li><a href="#16-6"><span class="section-number">16.6</span>Unsafe statement written to the binary log using statement format since BINLOG_FORMAT = STATEMENT</a></li>
<li><a href="#16-7"><span class="section-number">16.7</span>通过 Admin 页面新增对象时，抛出 Error creating new content types. Please make sure contenttypes is migrated before trying to migrate apps individually.</a></li>
<li><a href="#16-8"><span class="section-number">16.8</span>当 DEBUG = False 时找不到 static 文件，除非 python manage.py runserver --insecure </a></li>
<li><a href="#16-9"><span class="section-number">16.9</span>ADMINS 的值是个 tuple 的 tuple，后面有个逗号</a></li>
<li><a href="#20160817_0249"><span class="section-number">20160817_0249</span>[Errno socket error] [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590) &#60;2016-08-17 三 02:49&#62;</a></li>
<li><a href="#20160821_1933"><span class="section-number">20160821_1933</span>首次线上部署时，执行 python manage.py makemigrations 没有如预期地生成迁移指令 &#60;2016-08-21 日 19:33&#62;</a></li>
<li><a href="#20161125_0926"><span class="section-number">20161125_0926</span>django.core.exceptions.AppRegistryNotReady: Apps aren&#39;t loaded yet. &#60;2016-11-25 五 09:26&#62;</a></li>
</ul>
</li>
<li><a href="#17"><span class="section-number">17</span>回顾</a><ul class="nav nav-toc"><li><a href="#20140301"><span class="section-number">20140301</span>看完了官方 Tutorial &#60;2014-03-01 六&#62;</a></li>
<li><a href="#20150327"><span class="section-number">20150327</span>再度使用 Django &#60;2015-03-27 五&#62;</a></li>
<li><a href="#20150619"><span class="section-number">20150619</span>Django 还是很挫的 &#60;2015-06-19 五&#62;</a></li>
</ul>
</li>
</ul>
</div></div></div></div></div><footer class="footer" id="footer" role="contentinfo" data-reactid="43"><div class="container" data-reactid="44"><p data-reactid="45"><!-- react-text: 46 -->本网站由 <!-- /react-text --><a href="http://elvestar.com/about/" target="blank" data-reactid="47">仲毅</a><!-- react-text: 48 --> 创建和维护，使用 <!-- /react-text --><a href="https://www.gnu.org/software/emacs/" target="blank" data-reactid="49">Emacs</a><!-- react-text: 50 --> <!-- /react-text --><a href="http://orgmode.org/" target="blank" data-reactid="51">Org mode</a><!-- react-text: 52 --> 和 <!-- /react-text --><a href="http://nanoc.ws/" target="blank" data-reactid="53">Nanoc</a><!-- react-text: 54 --> 编辑和构建<!-- /react-text --></p><p data-reactid="55"><!-- react-text: 56 -->Licensed under <!-- /react-text --><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="blank" data-reactid="57">CC BY-NC-ND 4.0</a></p><ul class="footer-links" data-reactid="58"><li data-reactid="59">仲之地</li><li data-reactid="60"> · </li><li data-reactid="61"><a href="http://elvestar.com/blog/" target="blank" data-reactid="62">Blog</a></li><li data-reactid="63"> · </li><li data-reactid="64"><a href="http://elvestar.com/notes/" target="blank" data-reactid="65">知识管理</a></li><li data-reactid="66"> · </li><li data-reactid="67"><a href="http://elvestar.com/timeline/" target="blank" data-reactid="68">时间线</a></li><li data-reactid="69"> · </li><li data-reactid="70"><a href="http://elvestar.com/guestbook/" target="blank" data-reactid="71">留言本</a></li></ul></div></footer><div style="display:none;" id="react-mount-inner" data-reactid="72"></div></div></div><script src="/bundle.js?t=1507564180023"></script></body></html>